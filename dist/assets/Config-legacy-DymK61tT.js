System.register(["./TopHeader-legacy-BtDMQWlm.js","./index-legacy-Cw9ab6VK.js"],(function(e,t){"use strict";var a,n,i,o,r,l,s,d,c,u,m,p,h,g,f,v,b,y,w,k,x,M,$,T,C,V,S,P,q,I,O,E,U,N,_,L,D,R,j,B,A,z,F,H,Y,G,W,J,K,X,Q,Z,ee,te,ae,ne,ie,oe,re,le;return{setters:[e=>{a=e.T},e=>{n=e._,i=e.o,o=e.c,r=e.a,l=e.b,s=e.t,d=e.p,c=e.d,u=e.i,m=e.n,p=e.e,h=e.s,g=e.f,f=e.h,v=e.w,b=e.j,y=e.k,w=e.l,k=e.r,x=e.m,M=e.q,$=e.u,T=e.v,C=e.G,V=e.x,S=e.y,P=e.z,q=e.A,I=e.B,O=e.C,E=e.D,U=e.E,N=e.T,_=e.F,L=e.H,D=e.I,R=e.J,j=e.K,B=e.M,A=e.V,z=e.S,F=e.L,H=e.N,Y=e.O,G=e.P,W=e.Q,J=e.R,K=e.U,X=e.W,Q=e.X,Z=e.Y,ee=e.Z,te=e.$,ae=e.a0,ne=e.a1,ie=e.a2,oe=e.a3,re=e.a4,le=e.a5}],execute:function(){var t=document.createElement("style");t.textContent='.root[data-v-8dcf1510]{padding:0;display:block;list-style-type:none;min-height:9rem;border-radius:1rem;border:1px solid var(--evcc-gray-50);padding:1rem 1rem .5rem;transition:border-color var(--evcc-transition-fast) linear}.root[data-v-8dcf1510]:hover{border-color:var(--evcc-default-text);color:var(--evcc-default-text)}button[data-v-8dcf1510]{border-radius:1rem;background:none;border:none;height:100%;width:100%;color:inherit}.monaco-editor{--vscode-editor-background: var(--evcc-box) !important;--vscode-editorGutter-background: var(--evcc-box-border) !important}.error{background-color:var(--bs-danger-50)!important}.editor[data-v-dd15d1ef]{border:1px solid var(--bs-border-color)}.container[data-v-15403bc8]{margin-left:calc(var(--bs-gutter-x) * -.5);margin-right:calc(var(--bs-gutter-x) * -.5);padding-right:0}.editor-container[data-v-15403bc8]{margin:0 -1rem 0 -1.25rem}@media (min-width: 992px){.editor-container[data-v-15403bc8]{margin:0}}.btn-cancel[data-v-15403bc8]{margin-left:-.75rem}.container[data-v-8842f6f7]{margin-left:calc(var(--bs-gutter-x) * -.5);margin-right:calc(var(--bs-gutter-x) * -.5);padding-right:0}.btn-cancel[data-v-8842f6f7]{margin-left:-.75rem}.root[data-v-975a9278]{display:block;list-style-type:none;border-radius:1rem;padding:1rem 1.5rem;min-height:8rem}.icon[data-v-975a9278]:empty{display:none}.divide[data-v-975a9278]{margin-left:-1.5rem;margin-right:-1.5rem}.tags[data-v-754661f1]{display:grid;grid-template-columns:1fr;grid-gap:.5rem}.label[data-v-754661f1]{min-width:4rem}.value[data-v-754661f1]{font-weight:700;color:var(--bs-primary)}.value[data-v-754661f1]:empty:after{color:var(--evcc-gray);content:"â€“"}.value--error[data-v-754661f1]{color:var(--bs-danger)}.value--warning[data-v-754661f1]{color:var(--bs-warning)}.value--muted[data-v-754661f1]{color:var(--evcc-gray)!important}.container[data-v-ff633a8e]{margin-left:calc(var(--bs-gutter-x) * -.5);margin-right:calc(var(--bs-gutter-x) * -.5);padding-right:0}.btn-cancel[data-v-ff633a8e]{margin-left:-.75rem}.group[data-v-acfedf69]{display:grid;grid-template-columns:repeat(auto-fill,minmax(225px,1fr));grid-gap:2rem 5rem;margin-bottom:5rem;align-items:start}.wip[data-v-acfedf69]{opacity:.2}.config-entry[data-v-acfedf69]{display:flex;flex-wrap:nowrap;justify-content:space-between;align-items:center;gap:.5rem}.config-label[data-v-acfedf69]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex-shrink:1;flex-grow:0}.config-text[data-v-acfedf69]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex-shrink:1;flex-grow:1;text-align:right}.config-button[data-v-acfedf69]{margin-right:-1rem;flex-shrink:0;color:var(--evcc-text-default)}input[type=number]{-webkit-appearance:textfield;appearance:textfield}input[type=number]::-webkit-outer-spin-button,input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.w-min-100{min-width:min(100px,100%)}.w-min-150{min-width:min(150px,100%)}.w-min-200{min-width:min(200px,100%)}.icon[data-v-9a17e7d6]{transform:rotate(0);transition:transform var(--evcc-transition-medium) ease}.iconUp[data-v-9a17e7d6]{transform:rotate(-180deg)}.v-enter-active[data-v-9a17e7d6],.v-leave-active[data-v-9a17e7d6]{transition:transform var(--evcc-transition-medium) ease,opacity var(--evcc-transition-medium) ease;transform:translateY(0)}.v-enter-from[data-v-9a17e7d6],.v-leave-to[data-v-9a17e7d6]{opacity:0;transform:translateY(-.5rem)}.test-result[data-v-36dae936]{border:1px solid var(--bs-border-color);border-radius:var(--bs-border-radius)}.divider[data-v-36dae936]{border-top-color:1px solid var(--bs-border-color);margin-left:-1.5rem;margin-right:-1.5rem}.container[data-v-8407e33a]{margin-left:calc(var(--bs-gutter-x) * -.5);margin-right:calc(var(--bs-gutter-x) * -.5);padding-right:0}.addButton[data-v-8407e33a]{min-height:auto}textarea[data-v-d0e75c9d]{font-family:var(--bs-font-monospace)}.btn-form[data-v-d0e75c9d]{margin-left:-.75rem}.container[data-v-a893535e]{margin-left:calc(var(--bs-gutter-x) * -.5);margin-right:calc(var(--bs-gutter-x) * -.5);padding-right:0}.config-list[data-v-da87840f]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-gap:2rem;margin-bottom:5rem}.wip[data-v-da87840f]{opacity:.2!important;display:none!important}\n',document.head.appendChild(t);class se extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><style></style><g id="Your_Icons"><path d="M0-.004h48v48H0v-48z" fill="none"/><path d="M35 9.996h-3v-4a2 2 0 00-2-2H18a2 2 0 00-2 2v4h-3a2 2 0 00-2 2v30a2 2 0 002 2h22a2 2 0 002-2v-30a2 2 0 00-2-2zm-15-2h8v2h-8v-2zm13 32H15v-26h18v26z"/><path d="M30 36.996H18v-16h12v16z"/></g></svg>'}}window.customElements.define("shopicon-regular-batterythreequarters",se);class de extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M26 8h-4v14H8v4h14v14h4V26h14v-4H26z"/></svg>'}}window.customElements.define("shopicon-regular-plus",de);const ce={name:"AddDeviceButton",props:{title:String},emits:["add"]},ue=e=>(d("data-v-8dcf1510"),e=e(),c(),e),me={class:"root"},pe=ue((()=>r("shopicon-regular-plus",{class:"me-1"},null,-1))),he=n(ce,[["render",function(e,t,a,n,d,c){return i(),o("li",me,[r("button",{class:"d-flex align-items-center justify-content-center p-3",onClick:t[0]||(t[0]=t=>e.$emit("add"))},[pe,l(" "+s(a.title),1)])])}],["__scopeId","data-v-8dcf1510"]]),ge={name:"Circuits",mixins:[u]},fe=[r("path",{fill:"currentColor",d:"M4 21q-1.25 0-2.125-.875T1 18t.875-2.125T4 15q.225 0 .438.038t.412.087L8.9 9.55q-.425-.525-.663-1.175T8 7q0-1.65 1.175-2.825T12 3t2.825 1.175T16 7q0 .725-.25 1.375t-.675 1.175l4.075 5.575q.2-.05.413-.088T20 15q1.25 0 2.125.875T23 18t-.875 2.125T20 21t-2.125-.875T17 18q0-.475.138-.913t.387-.787l-4.05-5.575q-.125.05-.237.075t-.238.075v4.3q.875.3 1.438 1.075T15 18q0 1.25-.875 2.125T12 21t-2.125-.875T9 18q0-.975.563-1.737T11 15.174v-4.3q-.125-.05-.238-.075t-.237-.075L6.475 16.3q.25.35.388.788T7 18q0 1.25-.875 2.125T4 21m0-2q.425 0 .713-.288T5 18t-.288-.712T4 17t-.712.288T3 18t.288.713T4 19m8 0q.425 0 .713-.288T13 18t-.288-.712T12 17t-.712.288T11 18t.288.713T12 19m8 0q.425 0 .713-.288T21 18t-.288-.712T20 17t-.712.288T19 18t.288.713T20 19M12 9q.825 0 1.413-.587T14 7t-.587-1.412T12 5t-1.412.588T10 7t.588 1.413T12 9"},null,-1)],ve=n(ge,[["render",function(e,t,a,n,r,l){return i(),o("svg",{style:m(e.svgStyle),viewBox:"0 0 24 24"},fe,4)}]]);function be(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ye(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function we(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(a),!0).forEach((function(t){be(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ye(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ke(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Me(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(a),!0).forEach((function(t){Me(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$e(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Ce(e){return function t(){for(var a=this,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return i.length>=e.length?e.apply(this,i):function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];return t.apply(a,[].concat(i,n))}}}function Ve(e){return{}.toString.call(e).includes("Object")}function Se(e){return"function"==typeof e}var Pe=Ce((function(e,t){throw new Error(e[t]||e.default)}))({initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"}),qe={changes:function(e,t){return Ve(t)||Pe("changeType"),Object.keys(t).some((function(t){return a=e,n=t,!Object.prototype.hasOwnProperty.call(a,n);var a,n}))&&Pe("changeField"),t},selector:function(e){Se(e)||Pe("selectorType")},handler:function(e){Se(e)||Ve(e)||Pe("handlerType"),Ve(e)&&Object.values(e).some((function(e){return!Se(e)}))&&Pe("handlersType")},initial:function(e){var t;e||Pe("initialIsRequired"),Ve(e)||Pe("initialType"),t=e,Object.keys(t).length||Pe("initialContent")}};function Ie(e,t){return Se(t)?t(e.current):t}function Oe(e,t){return e.current=Te(Te({},e.current),t),t}function Ee(e,t,a){return Se(t)?t(e.current):Object.keys(a).forEach((function(a){var n;return null===(n=t[a])||void 0===n?void 0:n.call(t,e.current[a])})),a}var Ue,Ne={create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};qe.initial(e),qe.handler(t);var a={current:e},n=Ce(Ee)(a,t),i=Ce(Oe)(a),o=Ce(qe.changes)(e),r=Ce(Ie)(a);return[function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return qe.selector(e),e(a.current)},function(e){!function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(n,i,o,r)(e)}]}},_e={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:"Deprecation warning!\n    You are using deprecated way of configuration.\n\n    Instead of using\n      monaco.config({ urls: { monacoBase: '...' } })\n    use\n      monaco.config({ paths: { vs: '...' } })\n\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\n  "},Le=(Ue=function(e,t){throw new Error(e[t]||e.default)},function e(){for(var t=this,a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return n.length>=Ue.length?Ue.apply(this,n):function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return e.apply(t,[].concat(n,i))}})(_e),De={config:function(e){var t;return e||Le("configIsRequired"),t=e,{}.toString.call(t).includes("Object")||Le("configType"),e.urls?(console.warn(_e.deprecation),{paths:{vs:e.urls.monacoBase}}):e}};function Re(e,t){return Object.keys(t).forEach((function(a){t[a]instanceof Object&&e[a]&&Object.assign(t[a],Re(e[a],t[a]))})),we(we({},e),t)}var je={type:"cancelation",msg:"operation is manually canceled"};function Be(e){var t=!1,a=new Promise((function(a,n){e.then((function(e){return t?n(je):a(e)})),e.catch(n)}));return a.cancel=function(){return t=!0},a}var Ae,ze,Fe=Ne.create({config:{paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}},isInitialized:!1,resolve:null,reject:null,monaco:null}),He=(ze=2,function(e){if(Array.isArray(e))return e}(Ae=Fe)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(n=(r=l.next()).done)&&(a.push(r.value),!t||a.length!==t);n=!0);}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return a}}(Ae,ze)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?xe(e,t):void 0}}(Ae,ze)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Ye=He[0],Ge=He[1];function We(e){return document.body.appendChild(e)}function Je(e){var t,a,n=Ye((function(e){return{config:e.config,reject:e.reject}})),i=(t="".concat(n.config.paths.vs,"/loader.js"),a=document.createElement("script"),t&&(a.src=t),a);return i.onload=function(){return e()},i.onerror=n.reject,i}function Ke(){var e=Ye((function(e){return{config:e.config,resolve:e.resolve,reject:e.reject}})),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],(function(t){Xe(t),e.resolve(t)}),(function(t){e.reject(t)}))}function Xe(e){Ye().monaco||Ge({monaco:e})}var Qe=new Promise((function(e,t){return Ge({resolve:e,reject:t})})),Ze={config:function(e){var t=De.config(e),a=t.monaco,n=ke(t,["monaco"]);Ge((function(e){return{config:Re(e.config,n),monaco:a}}))},init:function(){var e=Ye((function(e){return{monaco:e.monaco,isInitialized:e.isInitialized,resolve:e.resolve}}));if(!e.isInitialized){if(Ge({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Be(Qe);if(window.monaco&&window.monaco.editor)return Xe(window.monaco),e.resolve(window.monaco),Be(Qe);!function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}}(We,Je)(Ke)}return Be(Qe)},__getMonacoInstance:function(){return Ye((function(e){return e.monaco}))}},et=Object.defineProperty,tt=Object.defineProperties,at=Object.getOwnPropertyDescriptors,nt=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,ot=Object.prototype.propertyIsEnumerable,rt=(e,t,a)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,lt=(e,t)=>{for(var a in t||(t={}))it.call(t,a)&&rt(e,a,t[a]);if(nt)for(var a of nt(t))ot.call(t,a)&&rt(e,a,t[a]);return e};const st={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}};function dt(e,t){return{wrapperStyle:g((()=>{const{width:t,height:a}=e;return n=lt({},st.wrapper),tt(n,at({width:t,height:a}));var n})),containerStyle:g((()=>lt(lt({},st.fullWidth),!t.value&&st.hide)))}}function ct(e){return"function"==typeof e?e():e}function ut(e){return void 0===e}function mt(e,t,a,n){return function(e,t){return e.editor.getModel(pt(e,t))}(e,n)||function(e,t,a,n){return e.editor.createModel(t,a,n?pt(e,n):void 0)}(e,t,a,n)}function pt(e,t){return e.Uri.parse(t)}var ht=Object.defineProperty,gt=Object.getOwnPropertySymbols,ft=Object.prototype.hasOwnProperty,vt=Object.prototype.propertyIsEnumerable,bt=(e,t,a)=>t in e?ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;const yt={display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"};var wt=p({name:"VueMonacoEditor",model:{prop:"value",event:"update:value"},props:{defaultValue:String,defaultPath:String,defaultLanguage:String,value:String,language:String,path:String,theme:{type:String,default:"vs"},line:Number,options:{type:Object,default:()=>({})},overrideServices:{type:Object,default:()=>({})},saveViewState:{type:Boolean,default:!0},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:String},emits:["update:value","beforeMount","mount","change","validate"],setup(e,t){const a=new Map,n=h(null),{monacoRef:i,unload:o,isLoadFailed:r}=function(){const e=h(Ze.__getMonacoInstance()),t=k(!1);let a;return y((()=>{e.value||(a=Ze.init(),a.then((t=>e.value=t)).catch((e=>{"cancelation"!==(null==e?void 0:e.type)&&(t.value=!0,console.error("Monaco initialization error:",e))})))})),{monacoRef:e,unload:()=>null==a?void 0:a.cancel(),isLoadFailed:t}}(),{editorRef:l}=function({emit:e},t,a,n){const i=h(null);function o(){var o;if(!n.value||!a.value||i.value)return;e("beforeMount",a.value);const r=t.path||t.defaultPath,l=mt(a.value,t.value||t.defaultValue||"",t.language||t.defaultLanguage||"",r||"");i.value=a.value.editor.create(n.value,((e,t)=>{for(var a in t||(t={}))ft.call(t,a)&&bt(e,a,t[a]);if(gt)for(var a of gt(t))vt.call(t,a)&&bt(e,a,t[a]);return e})({model:l,theme:t.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},t.options),t.overrideServices),null==(o=i.value)||o.onDidChangeModelContent((a=>{const n=i.value.getValue();n!==t.value&&(e("update:value",n),e("change",n,a))})),i.value&&!ut(t.line)&&i.value.revealLine(t.line),e("mount",i.value,a.value)}return y((()=>{const e=v(a,(()=>{n.value&&a.value&&(w((()=>e())),o())}),{immediate:!0})})),{editorRef:i}}(t,e,i,n),{disposeValidator:s}=function({emit:e},t,a,n){const i=k(null),o=v([a,n],(()=>{if(a.value&&n.value){w((()=>o()));const t=a.value.editor.onDidChangeMarkers((t=>{var i,o;const r=null==(o=null==(i=n.value)?void 0:i.getModel())?void 0:o.uri;if(r&&t.find((e=>e.path===r.path))){const t=a.value.editor.getModelMarkers({resource:r});e("validate",t)}}));i.value=()=>null==t?void 0:t.dispose()}}));return{disposeValidator:i}}(t,0,i,l),d=g((()=>!!i.value&&!!l.value)),{wrapperStyle:c,containerStyle:u}=dt(e,d);return f((()=>{var e,t;null==(e=s.value)||e.call(s),l.value?(null==(t=l.value.getModel())||t.dispose(),l.value.dispose()):o()})),v([()=>e.path,()=>e.value,()=>e.language,()=>e.line],(([t,n,o,r],[s,c,u,m])=>{if(d.value){if(t!==s){const d=mt(i.value,n||e.defaultValue||"",o||e.defaultLanguage||"",t||e.defaultPath||"");return e.saveViewState&&a.set(s,l.value.saveViewState()),l.value.setModel(d),e.saveViewState&&l.value.restoreViewState(a.get(t)),void(ut(r)||l.value.revealLine(r))}l.value.getValue()!==n&&l.value.setValue(n),o!==u&&i.value.editor.setModelLanguage(l.value.getModel(),o),ut(r)||r===m||l.value.revealLine(r)}})),v((()=>e.options),(e=>l.value&&l.value.updateOptions(e)),{deep:!0}),v((()=>e.theme),(e=>i.value&&i.value.editor.setTheme(e))),{containerRef:n,isEditorReady:d,isLoadFailed:r,wrapperStyle:c,containerStyle:u}},render(){const{$slots:e,isEditorReady:t,isLoadFailed:a,wrapperStyle:n,containerStyle:i,className:o}=this;return b("div",{style:n},[!t&&b("div",{style:yt},a?e.failure?ct(e.failure):"load failed":e.default?ct(e.default):"loading..."),b("div",{ref:"containerRef",key:"monaco_editor_container",style:i,class:o})])}});const kt=document.querySelector("html"),xt={name:"YamlEditor",props:{modelValue:String,errorLine:Number,disabled:Boolean},components:{VueMonacoEditor:wt},emits:["update:modelValue"],data:()=>({theme:"vs",defaultOptions:{automaticLayout:!0,formatOnType:!0,formatOnPaste:!0,minimap:{enabled:!1},showFoldingControls:"always",scrollBeyondLastLine:!1,wordWrap:"off",wrappingStrategy:"advanced",overviewRulerLanes:0},active:!0}),mounted(){this.updateTheme(),kt.addEventListener("themechange",this.updateTheme)},watch:{errorLine(){this.active=!1,this.$nextTick((()=>this.active=!0))}},computed:{options(){return{...this.defaultOptions,readOnly:this.disabled}},lines(){return(this.modelValue||"").split("\n").length}},beforeMount(){Ze.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.50.0/min/vs"}}),Ze.init()},unmounted(){kt.removeEventListener("themechange",this.updateTheme)},methods:{updateTheme(){this.theme=kt.classList.contains("dark")?"vs-dark":"vs"},ready(e,t){let a=null;const n=()=>{a?.clear(),this.errorLine&&(a=e.createDecorationsCollection([{range:new t.Range(this.errorLine,1,this.errorLine,1),options:{isWholeLine:!0,className:"error",lineNumberClassName:"error",marginClassName:"error"}}]))};e.onDidChangeModelContent((()=>n())),n()}}},Mt=["rows","value","disabled"],$t={name:"YamlModal",components:{GenericModal:C,YamlEditor:n(xt,[["render",function(e,t,a,n,o,d){const c=x("VueMonacoEditor");return o.active?(i(),M(c,{key:0,class:"editor",language:"yaml",theme:o.theme,options:d.options,value:a.modelValue,ref:"editor","onUpdate:value":t[1]||(t[1]=t=>e.$emit("update:modelValue",t)),onMount:d.ready},{default:$((()=>[l(s(e.$t("config.editor.loading")),1)])),failure:$((()=>[r("textarea",{class:"form-control",rows:d.lines,value:a.modelValue,disabled:a.disabled,onInput:t[0]||(t[0]=t=>e.$emit("update:modelValue",t.target.value))},null,40,Mt)])),_:1},8,["theme","options","value","onMount"])):T("",!0)}],["__scopeId","data-v-dd15d1ef"]])},emits:["changed"],data:()=>({saving:!1,error:"",errorLine:void 0,yaml:"",serverYaml:""}),props:{title:String,description:String,docs:String,endpoint:String,defaultYaml:String,size:{type:String,default:"xl"}},computed:{docsLink(){return`${V()}${this.docs}`},height(){return Math.max(150,18*this.yaml.split("\n").length)+22+"px"},nothingChanged(){return this.yaml===this.serverYaml&&""!==this.yaml}},methods:{reset(){this.yaml="",this.serverYaml="",this.error="",this.saving=!1,this.errorLine=void 0},async open(){this.reset(),await this.load()},async load(){try{const{data:e}=await S.get(this.endpoint);this.serverYaml=e.result,this.yaml=e.result||this.defaultYaml}catch(Ai){console.error(Ai)}},async save(){this.saving=!0,this.error="",this.errorLine=void 0;try{const e=this.yaml===this.defaultYaml?"":this.yaml,t=await S.post(this.endpoint,e,{validateStatus:e=>[200,400].includes(e)});200===t.status&&(this.$emit("changed"),this.$refs.modal.close()),400===t.status&&(this.error=t.data.error,this.errorLine=t.data.line)}catch(Ai){console.error(Ai)}this.saving=!1}}},Tt={key:0},Ct={key:0},Vt=["href"],St={key:1,class:"text-danger","data-testid":"error"},Pt={ref:"form",class:"container mx-0 px-0"},qt={class:"mt-4 d-flex justify-content-between"},It={type:"button",class:"btn btn-link text-muted btn-cancel","data-bs-dismiss":"modal"},Ot=["disabled"],Et={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ut=n($t,[["render",function(e,t,a,n,d,c){const u=x("YamlEditor"),p=x("GenericModal");return i(),M(p,{ref:"modal",size:a.size,title:a.title,onOpen:c.open},{default:$((()=>[a.description||c.docsLink?(i(),o("p",Tt,[a.description?(i(),o("span",Ct,s(a.description+" "),1)):T("",!0),c.docsLink?(i(),o("a",{key:1,href:c.docsLink,target:"_blank"},s(e.$t("config.general.docsLink")),9,Vt)):T("",!0)])):T("",!0),d.error?(i(),o("p",St,s(d.error),1)):T("",!0),r("form",Pt,[r("div",{class:"editor-container",style:m({height:c.height})},[P(u,{modelValue:d.yaml,"onUpdate:modelValue":t[0]||(t[0]=e=>d.yaml=e),class:"editor",errorLine:d.errorLine},null,8,["modelValue","errorLine"])],4),r("div",qt,[r("button",It,s(e.$t("config.general.cancel")),1),r("button",{type:"submit",class:"btn btn-primary",disabled:d.saving||c.nothingChanged,onClick:t[1]||(t[1]=q(((...e)=>c.save&&c.save(...e)),["prevent"]))},[d.saving?(i(),o("span",Et)):T("",!0),l(" "+s(e.$t("config.general.save")),1)],8,Ot)])],512)])),_:1},8,["size","title","onOpen"])}],["__scopeId","data-v-15403bc8"]]),Nt=n({name:"CircuitsModal",components:{YamlModal:Ut},emits:["changed"],data:()=>({defaultYaml:"#- name: main # unique name, used as reference, e.g. as parent in other circuits\n#  title: Main Circuit # used in the UI\n#  maxcurrent: 63 # 63A main circuit breaker (optional)\n#  maxPower: 30000 # 30kW (optional)\n#  meter: grid # associated meter to monitor the power consumption (optional)\n#  parent: # no parent, this is the root circuit\n#- name: garage # unique name, used as reference, e.g. to associate loadpoints\n#  title: Garage # used in the UI\n#  maxcurrent: 24 # allow individual phase use up to 24A\n#  maxPower: 11000 # limit total power to 11kW\n#  meter: garage # dedicated meter for the garage\n#  parent: main # parent to the main circuit\n#- name: carport # unique name, used as reference, e.g. to associate loadpoints\n#  title: Carport # used in the UI\n#  maxCurrent: 32 # 32A circuit breaker\n#  maxPower: # no limit, only check current\n#  meter: # no meter, using data from loadpoints\n#  parent: main # parent to the main circuit\n".trim()})},[["render",function(e,t,a,n,o,r){const l=x("YamlModal");return i(),M(l,{id:"circuitsModal",title:e.$t("config.circuits.title"),description:e.$t("config.circuits.description"),docs:"/docs/features/loadmanagement",defaultYaml:o.defaultYaml,endpoint:"/config/circuits",onChanged:t[0]||(t[0]=t=>e.$emit("changed"))},null,8,["title","description","defaultYaml"])}]]),_t={name:"FormRow",props:{id:String,label:String,help:String,optional:Boolean,example:String,docsLink:String},computed:{helpHtml(){return this.help.replace(/https?:\/\/[^\s]+/g,(function(e){return`<a href="${e}" target="_blank">${e}</a>`}))},link(){return this.docsLink?`${V()}${this.docsLink}`:null}}},Lt={class:"mb-4"},Dt=["for"],Rt={class:"form-label"},jt={key:0,class:"evcc-gray"},Bt={class:"w-100"},At={class:"form-text evcc-gray"},zt={key:0},Ft={key:1},Ht=["innerHTML"],Yt=["href"],Gt=n(_t,[["render",function(e,t,a,n,d,c){return i(),o("div",Lt,[r("label",{for:a.id},[r("div",Rt,[l(s(a.label)+" ",1),a.optional?(i(),o("small",jt,s(e.$t("config.form.optional")),1)):T("",!0)])],8,Dt),r("div",Bt,[I(e.$slots,"default")]),r("div",At,[a.example?(i(),o("div",zt,s(e.$t("config.form.example"))+": "+s(a.example),1)):T("",!0),a.help?(i(),o("div",Ft,[r("span",{class:"text-gray",innerHTML:c.helpHtml},null,8,Ht),c.link?(i(),o("a",{key:0,class:"ms-1 text-gray",href:c.link,target:"_blank"},s(e.$t("config.general.docsLink")),9,Yt)):T("",!0)])):T("",!0)])])}]]),Wt={name:"ControlModal",components:{FormRow:Gt,GenericModal:C},emits:["changed"],data:()=>({saving:!1,error:"",values:{},serverValues:{}}),computed:{intervalChanged(){return this.values.interval!==this.serverValues.interval},residualPowerChanged(){return this.values.residualPower!==this.serverValues.residualPower},maxGridSupplyChanged(){return this.values.maxGridSupply!==this.serverValues.maxGridSupply},nothingChanged(){return!this.intervalChanged&&!this.residualPowerChanged&&!this.maxGridSupplyChanged}},methods:{reset(){const{interval:e,residualPower:t,maxGridSupplyWhileBatteryCharging:a}=O?.state||{};this.saving=!1,this.error="",this.values={interval:e,residualPower:t,maxGridSupply:a},this.serverValues={...this.values}},async open(){this.reset()},async saveValue(e){let t="";"interval"===e?t=`/config/interval/${encodeURIComponent(this.values.interval)}`:"residualPower"===e?t=`/residualpower/${encodeURIComponent(this.values.residualPower)}`:"maxGridSupply"===e&&(t=`/maxgridsupply/${encodeURIComponent(this.values.maxGridSupply)}`),await S.post(t)},async save(){this.saving=!0,this.error="";try{this.intervalChanged&&await this.saveValue("interval"),this.residualPowerChanged&&await this.saveValue("residualPower"),this.maxGridSupplyChanged&&await this.saveValue("maxGridSupply"),this.$emit("changed"),this.$refs.modal.close()}catch(Ai){this.error=Ai.message}this.saving=!1}}},Jt=e=>(d("data-v-8842f6f7"),e=e(),c(),e),Kt={key:0,class:"text-danger"},Xt={class:"input-group w-50 w-sm-25"},Qt=Jt((()=>r("span",{id:"controlIntervalUnit",class:"input-group-text"},"s",-1))),Zt={class:"input-group w-50 w-sm-25"},ea=Jt((()=>r("span",{id:"controlResidualPowerUnit",class:"input-group-text"},"W",-1))),ta={class:"input-group w-50 w-sm-25"},aa=Jt((()=>r("span",{id:"controlMaxGridSupplyUnit",class:"input-group-text"},"W",-1))),na={class:"mt-4 d-flex justify-content-between gap-2 flex-column flex-sm-row"},ia={type:"button",class:"btn btn-link text-muted btn-cancel","data-bs-dismiss":"modal"},oa=["disabled"],ra={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},la=n(Wt,[["render",function(e,t,a,n,d,c){const u=x("FormRow"),m=x("GenericModal");return i(),M(m,{id:"controlModal",ref:"modal",title:e.$t("config.control.title"),"data-testid":"control-modal",onOpen:c.open},{default:$((()=>[r("p",null,s(e.$t("config.control.description")),1),d.error?(i(),o("p",Kt,s(d.error),1)):T("",!0),r("form",{ref:"form",class:"container mx-0 px-0",onSubmit:t[3]||(t[3]=q(((...e)=>c.save&&c.save(...e)),["prevent"]))},[P(u,{id:"controlInterval",label:e.$t("config.control.labelInterval"),help:e.$t("config.control.descriptionInterval"),example:"30 s",docsLink:"/docs/reference/configuration/interval"},{default:$((()=>[r("div",Xt,[E(r("input",{id:"controlInterval","onUpdate:modelValue":t[0]||(t[0]=e=>d.values.interval=e),type:"number",step:"1",min:"1",required:"","aria-describedby":"controlIntervalUnit",class:"form-control text-end"},null,512),[[U,d.values.interval]]),Qt])])),_:1},8,["label","help"]),P(u,{id:"controlResidualPower",label:e.$t("config.control.labelResidualPower"),help:e.$t("config.control.descriptionResidualPower"),example:"100 W",docsLink:"/docs/reference/configuration/site#residualpower"},{default:$((()=>[r("div",Zt,[E(r("input",{id:"controlResidualPower","onUpdate:modelValue":t[1]||(t[1]=e=>d.values.residualPower=e),type:"number",step:"1",required:"","aria-describedby":"controlResidualPowerUnit",class:"form-control text-end"},null,512),[[U,d.values.residualPower]]),ea])])),_:1},8,["label","help"]),P(u,{id:"controlMaxGridSupply",label:e.$t("config.control.labelMaxGridSupply"),help:e.$t("config.control.descriptionMaxGridSupply"),docsLink:"/docs/reference/configuration/site#maxgridsupplywhilebatterycharging"},{default:$((()=>[r("div",ta,[E(r("input",{id:"controlMaxGridSupply","onUpdate:modelValue":t[2]||(t[2]=e=>d.values.maxGridSupply=e),type:"number",step:"1",required:"","aria-describedby":"controlMaxGridSupplyUnit",class:"form-control text-end"},null,512),[[U,d.values.maxGridSupply]]),aa])])),_:1},8,["label","help"]),r("div",na,[r("button",ia,s(e.$t("config.general.cancel")),1),r("button",{type:"submit",class:"btn btn-primary order-1 order-sm-2 flex-grow-1 flex-sm-grow-0 px-4",disabled:d.saving||c.nothingChanged},[d.saving?(i(),o("span",ra)):T("",!0),l(" "+s(e.$t("config.general.save")),1)],8,oa)])],544)])),_:1},8,["title","onOpen"])}],["__scopeId","data-v-8842f6f7"]]);class sa extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M6 44l9-4 9 4 9-4 9 4V4H6v40zm4-36h28v29.845l-3.375-1.5L33 35.623l-1.625.722L24 39.623l-7.375-3.278L15 35.623l-1.625.722-3.375 1.5V8z"/><path d="M14 12h20v4H14zM14 20h20v4H14zM14 28h12v4H14z"/></svg>'}}window.customElements.define("shopicon-regular-invoice",sa);const da={name:"DeviceCard",props:{name:String,editable:Boolean,error:Boolean},data:()=>({tooltip:null}),emits:["edit"],mounted(){this.initTooltip()},watch:{editable(){this.initTooltip()}},methods:{initTooltip(){this.$nextTick((()=>{this.tooltip?.dispose(),this.$refs.tooltip&&(this.tooltip=new N(this.$refs.tooltip))}))}}},ca=e=>(d("data-v-975a9278"),e=e(),c(),e),ua={class:"d-flex align-items-center mb-2"},ma={class:"icon me-2"},pa={class:"flex-grow-1 text-nowrap text-truncate"},ha=["title"],ga=[ca((()=>r("shopicon-regular-adjust",{size:"s"},null,-1)))],fa=["title"],va=[ca((()=>r("shopicon-regular-adjust",{size:"s"},null,-1)))],ba=ca((()=>r("hr",{class:"my-3 divide"},null,-1))),ya=n(da,[["render",function(e,t,a,n,l,d){return i(),o("li",{class:_(["root round-box",{"round-box--error":a.error}])},[r("div",ua,[r("div",ma,[I(e.$slots,"icon",{},void 0,!0)]),r("strong",pa,s(a.name),1),a.editable?(i(),o("button",{key:0,type:"button",class:"btn btn-sm btn-outline-secondary position-relative border-0 p-2",title:e.$t("config.main.edit"),onClick:t[0]||(t[0]=t=>e.$emit("edit"))},ga,8,ha)):(i(),o("button",{key:1,ref:"tooltip",type:"button",class:"btn btn-sm btn-outline-secondary position-relative border-0 p-2 opacity-25","data-bs-toggle":"tooltip",title:e.$t("config.main.yaml")},va,8,fa))]),ba,I(e.$slots,"tags",{},void 0,!0)],2)}],["__scopeId","data-v-975a9278"]]),wa={key:0,class:"tags"},ka=["data-testid"],xa={class:"label overflow-hidden text-truncate flex-shrink-1 flex-grow-1"},Ma=n({name:"DeviceTags",props:{tags:Object},mixins:[L],computed:{entries(){return Object.entries(this.tags).map((([e,{value:t,error:a,warning:n,muted:i,options:o}])=>({name:e,value:t,error:a,warning:n,muted:i,options:o})))}},methods:{fmtDeviceValue(e){const{name:t,value:a,options:n={}}=e;if(null==a)return"";switch(t){case"power":return this.fmtW(a);case"energy":case"capacity":case"chargedEnergy":return this.fmtWh(1e3*a);case"soc":case"socLimit":return this.fmtPercentage(a,1);case"temp":return this.fmtTemperature(a);case"odometer":case"range":return`${this.fmtNumber(a,0)} km`;case"phaseCurrents":return a.map((e=>this.fmtNumber(e,0))).join(" ")+" A";case"phaseVoltages":return a.map((e=>this.fmtNumber(e,0))).join(" ")+" V";case"phasePowers":return a.map((e=>this.fmtW(e))).join(", ");case"chargeStatus":return this.$t(`config.deviceValue.chargeStatus${a}`);case"gridPrice":case"feedinPrice":return this.fmtPricePerKWh(a,n.currency,!0);case"co2":return this.fmtCo2Short(a);case"powerRange":return`${this.fmtW(a[0])} / ${this.fmtW(a[1])}`;case"currentRange":return`${this.fmtNumber(a[0],1)} A / ${this.fmtNumber(a[1],1)} A`;case"controllable":case"configured":return a?this.$t("config.deviceValue.yes"):this.$t("config.deviceValue.no")}return a}}},[["render",function(e,t,a,n,l,d){return a.tags?(i(),o("div",wa,[(i(!0),o(D,null,R(d.entries,((t,a)=>(i(),o("span",{key:a,"data-testid":`device-tag-${t.name}`,class:"d-flex gap-2 overflow-hidden text-truncate"},[r("div",xa,s(e.$t(`config.deviceValue.${t.name}`)),1),r("div",{class:_(["value overflow-hidden text-truncate",{"value--error":!!t.error,"value--warning":t.warning,"value--muted":t.muted||!1===t.value}])},s(d.fmtDeviceValue(t)),3)],8,ka)))),128))])):T("",!0)}],["__scopeId","data-v-754661f1"]]),$a={name:"Eebus",mixins:[u]},Ta=[r("path",{d:"M15.998,8.095c1.369,-0 2.669,0.219 3.902,0.657c1.232,0.438 2.349,1.04 3.352,1.807c0.365,0.273 0.553,0.634 0.562,1.081c0.01,0.448 -0.15,0.835 -0.48,1.163c-0.31,0.31 -0.693,0.47 -1.149,0.48c-0.456,0.009 -0.867,-0.114 -1.232,-0.37c-0.693,-0.475 -1.46,-0.849 -2.299,-1.123c-0.84,-0.273 -1.725,-0.41 -2.656,-0.41c-0.93,-0 -1.815,0.137 -2.655,0.41c-0.839,0.274 -1.606,0.648 -2.299,1.123c-0.365,0.255 -0.776,0.374 -1.232,0.356c-0.456,-0.019 -0.84,-0.183 -1.15,-0.493c-0.31,-0.329 -0.465,-0.716 -0.465,-1.163c-0,-0.447 0.182,-0.807 0.547,-1.082c1.004,-0.766 2.122,-1.364 3.354,-1.793c1.232,-0.43 2.532,-0.644 3.9,-0.643m0,-6.57c2.281,0 4.43,0.374 6.447,1.123c2.017,0.748 3.828,1.806 5.433,3.175c0.365,0.31 0.557,0.693 0.575,1.15c0.019,0.456 -0.137,0.848 -0.465,1.177c-0.31,0.31 -0.693,0.47 -1.15,0.479c-0.456,0.01 -0.867,-0.132 -1.232,-0.425c-1.313,-1.076 -2.787,-1.911 -4.42,-2.504c-1.633,-0.592 -3.362,-0.889 -5.188,-0.89c-1.825,-0.001 -3.554,0.296 -5.186,0.89c-1.633,0.595 -3.106,1.429 -4.422,2.504c-0.365,0.292 -0.775,0.434 -1.232,0.425c-0.456,-0.008 -0.839,-0.168 -1.149,-0.479c-0.329,-0.329 -0.484,-0.721 -0.466,-1.177c0.019,-0.457 0.21,-0.84 0.575,-1.15c1.606,-1.369 3.418,-2.427 5.434,-3.175c2.017,-0.749 4.166,-1.123 6.446,-1.123",fill:"currentColor"},null,-1),r("path",{d:"M15.992,23.961c-1.368,0 -2.669,-0.219 -3.901,-0.657c-1.232,-0.437 -2.35,-1.04 -3.353,-1.806c-0.365,-0.274 -0.552,-0.635 -0.561,-1.082c-0.01,-0.447 0.15,-0.835 0.479,-1.163c0.31,-0.31 0.694,-0.47 1.15,-0.479c0.456,-0.01 0.867,0.113 1.232,0.37c0.693,0.474 1.46,0.848 2.299,1.122c0.84,0.274 1.725,0.411 2.655,0.411c0.931,-0 1.816,-0.137 2.656,-0.411c0.839,-0.274 1.605,-0.648 2.299,-1.122c0.365,-0.256 0.776,-0.374 1.232,-0.356c0.456,0.018 0.839,0.182 1.149,0.493c0.311,0.328 0.466,0.716 0.466,1.162c-0,0.447 -0.183,0.808 -0.548,1.082c-1.003,0.767 -2.121,1.365 -3.353,1.794c-1.233,0.429 -2.533,0.643 -3.901,0.642m0,6.57c-2.281,0 -4.43,-0.374 -6.447,-1.122c-2.017,-0.748 -3.828,-1.807 -5.433,-3.176c-0.365,-0.31 -0.556,-0.693 -0.575,-1.149c-0.018,-0.456 0.137,-0.849 0.466,-1.177c0.31,-0.311 0.693,-0.47 1.149,-0.48c0.457,-0.009 0.867,0.132 1.232,0.425c1.314,1.077 2.788,1.911 4.421,2.504c1.632,0.593 3.362,0.89 5.187,0.89c1.826,0.001 3.555,-0.296 5.187,-0.89c1.632,-0.594 3.106,-1.429 4.421,-2.504c0.365,-0.292 0.776,-0.434 1.232,-0.425c0.456,0.009 0.84,0.169 1.15,0.48c0.328,0.328 0.484,0.721 0.465,1.177c-0.018,0.456 -0.21,0.839 -0.575,1.149c-1.605,1.369 -3.417,2.428 -5.434,3.176c-2.017,0.748 -4.165,1.122 -6.446,1.122",fill:"currentColor"},null,-1)],Ca=n($a,[["render",function(e,t,a,n,r,l){return i(),o("svg",{style:m(e.svgStyle),viewBox:"0 0 32 32"},Ta,4)}]]),Va=n({name:"EebusModal",components:{YamlModal:Ut},emits:["changed"],data:()=>({defaultYaml:"#shipid: EVCC-1234567890abcdef\n#interfaces:\n#  - eth0\n#certificate:\n#  public: |\n#    -----BEGIN CERTIFICATE-----\n#    1234567890abcdef==\n#    -----END CERTIFICATE-----\n#  private: |\n#    -----BEGIN EC PRIVATE KEY-----\n#    1234567890abcdef\n#    -----END EC PRIVATE KEY-----\n".trim()})},[["render",function(e,t,a,n,o,r){const l=x("YamlModal");return i(),M(l,{id:"eebusModal",title:e.$t("config.eebus.title"),description:e.$t("config.eebus.description"),docs:"/docs/reference/configuration/eebus",defaultYaml:o.defaultYaml,endpoint:"/config/eebus",onChanged:t[0]||(t[0]=t=>e.$emit("changed"))},null,8,["title","description","defaultYaml"])}]]),Sa={name:"JsonModal",components:{GenericModal:C},emits:["changed","open"],data:()=>({saving:!1,removing:!1,error:"",values:{},serverValues:{}}),props:{title:String,description:String,errorMessage:String,docs:String,endpoint:String,disableRemove:Boolean,noButtons:Boolean,transformReadValues:Function,stateKey:String,saveMethod:{type:String,default:"post"}},computed:{docsLink(){return this.docs?`${V()}${this.docs}`:null},nothingChanged(){return JSON.stringify(this.values)===JSON.stringify(this.serverValues)}},methods:{reset(){this.saving=!1,this.deleting=!1,this.error="",this.values="",this.serverValues=""},async open(){this.$emit("open"),this.reset(),await this.load()},async load(){this.serverValues=this.stateKey?O.state[this.stateKey]:O.state,this.transformReadValues&&(this.serverValues=this.transformReadValues(this.serverValues)),this.values={...this.serverValues}},async save(){this.saving=!0,this.error="";try{const e=await S[this.saveMethod](this.endpoint,this.values,{validateStatus:e=>[200,202,400].includes(e)});200!==e.status&&202!==e.status||(this.$emit("changed"),this.$refs.modal.close()),400===e.status&&(this.error=e.data.error)}catch(Ai){console.error(Ai)}this.saving=!1},async remove(){this.removing=!0,this.error="";try{const e=await S.delete(this.endpoint,{validateStatus:e=>[200,400].includes(e)});200===e.status&&(this.$emit("changed"),this.$refs.modal.close()),400===e.status&&(this.error=e.data.error)}catch(Ai){console.error(Ai)}this.removing=!1}}},Pa={key:0},qa={key:0},Ia=["href"],Oa={key:1,class:"text-danger"},Ea={key:0,class:"d-block"},Ua={key:0,class:"mt-4 d-flex justify-content-between gap-2 flex-column flex-sm-row"},Na={class:"d-flex justify-content-between order-2 order-sm-1 gap-2 flex-grow-1 flex-sm-grow-0"},_a={type:"button",class:"btn btn-link text-muted btn-cancel","data-bs-dismiss":"modal"},La=["disabled"],Da={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ra=["disabled"],ja={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ba=n(Sa,[["render",function(e,t,a,n,d,c){const u=x("GenericModal");return i(),M(u,{ref:"modal",title:a.title,onOpen:c.open},{default:$((()=>[a.description||c.docsLink?(i(),o("p",Pa,[a.description?(i(),o("span",qa,s(a.description+" "),1)):T("",!0),c.docsLink?(i(),o("a",{key:1,href:c.docsLink,target:"_blank"},s(e.$t("config.general.docsLink")),9,Ia)):T("",!0)])):T("",!0),d.error?(i(),o("p",Oa,[a.errorMessage?(i(),o("span",Ea,s(a.errorMessage),1)):T("",!0),l(" "+s(d.error),1)])):T("",!0),r("form",{ref:"form",class:"container mx-0 px-0",onSubmit:t[1]||(t[1]=q(((...e)=>c.save&&c.save(...e)),["prevent"]))},[I(e.$slots,"default",{values:d.values},void 0,!0),a.noButtons?T("",!0):(i(),o("div",Ua,[r("div",Na,[r("button",_a,s(e.$t("config.general.cancel")),1),a.disableRemove?T("",!0):(i(),o("button",{key:0,type:"button",class:"btn btn-link text-danger",disabled:d.removing,onClick:t[0]||(t[0]=(...e)=>c.remove&&c.remove(...e))},[d.removing?(i(),o("span",Da)):T("",!0),l(" "+s(e.$t("config.general.remove")),1)],8,La))]),r("button",{type:"submit",class:"btn btn-primary order-1 order-sm-2 flex-grow-1 flex-sm-grow-0 px-4",disabled:d.saving||c.nothingChanged},[d.saving?(i(),o("span",ja)):T("",!0),l(" "+s(e.$t("config.general.save")),1)],8,Ra)]))],544)])),_:3},8,["title","onOpen"])}],["__scopeId","data-v-ff633a8e"]]),Aa=["onUpdate:modelValue"],za=n({name:"TitleModal",components:{FormRow:Gt,JsonModal:Ba},emits:["changed"],methods:{transformReadValues:e=>({title:e})}},[["render",function(e,t,a,n,o,l){const s=x("FormRow"),d=x("JsonModal");return i(),M(d,{id:"titleModal",title:e.$t("config.title.title"),endpoint:"/config/site","state-key":"siteTitle","save-method":"put","transform-read-values":l.transformReadValues,"data-testid":"title-modal","disable-remove":"",onChanged:t[0]||(t[0]=t=>e.$emit("changed"))},{default:$((({values:t})=>[P(s,{id:"siteTitle",label:e.$t("config.title.label"),help:e.$t("config.title.description")},{default:$((()=>[E(r("input",{id:"siteTitle","onUpdate:modelValue":e=>t.title=e,class:"form-control"},null,8,Aa),[[U,t.title]])])),_:2},1032,["label","help"])])),_:1},8,["title","transform-read-values"])}]]),Fa={name:"Edit",mixins:[u]},Ha=[r("path",{fill:"currentColor",d:"M5 19h1.425L16.2 9.225L14.775 7.8L5 17.575zm-1 2q-.425 0-.712-.288T3 20v-2.425q0-.4.15-.763t.425-.637L16.2 3.575q.3-.275.663-.425t.762-.15t.775.15t.65.45L20.425 5q.3.275.437.65T21 6.4q0 .4-.138.763t-.437.662l-12.6 12.6q-.275.275-.638.425t-.762.15zM19 6.4L17.6 5zm-3.525 2.125l-.7-.725L16.2 9.225z"},null,-1)],Ya={name:"GeneralConfig",data:()=>({title:""}),components:{TitleModal:za,EditIcon:n(Fa,[["render",function(e,t,a,n,r,l){return i(),o("svg",{style:m(e.svgStyle),viewBox:"0 0 24 24"},Ha,4)}]])},mixins:[L],emits:["site-changed"],async mounted(){await this.load()},computed:{telemetryEnabled:()=>!0===j.telemetry,hiddenFeatures:()=>!0===j.hiddenFeatures,networkStatus(){const{host:e,port:t}=O.state?.network||{};return e?`${e}:${t}`:`${t||""}`},controlStatus(){const e=O.state?.interval;return e?this.fmtDuration(e):""},sponsorStatus(){const e=O.state?.sponsor||{},{name:t,expiresSoon:a}=e;let n="";return a?n="text-warning":t&&(n="text-primary"),{name:t,expiresSoon:a,cssClass:n}}},methods:{async changed(){this.$emit("site-changed"),this.load()},async load(){try{let e=await S.get("/config/site",{validateStatus:e=>[200,404].includes(e)});200===e.status?this.title=e.data.result.title:console.log("TODO: implement site endpoint in config error mode")}catch(Ai){console.error(Ai)}},todo(){alert("not implemented")},openModal(e){const t=document.getElementById(e);t?B.getOrCreateInstance(t).show():console.error(`modal ${e} not found`)}}},Ga=e=>(d("data-v-acfedf69"),e=e(),c(),e),Wa={class:"group round-box p-4"},Ja={class:"config-entry","data-testid":"generalconfig-title"},Ka={class:"config-label"},Xa={class:"config-text"},Qa=["title"],Za={class:"config-entry","data-testid":"generalconfig-password"},en={class:"config-label"},tn=Ga((()=>r("div",{class:"config-text"},"*******",-1))),an=["title"],nn={class:"config-entry","data-testid":"generalconfig-telemetry"},on={class:"config-label"},rn={class:"config-text"},ln=["title"],sn={class:"config-entry","data-testid":"generalconfig-experimental"},dn={class:"config-label"},cn={class:"config-text"},un=["title"],mn={key:0,class:"config-entry","data-testid":"generalconfig-sponsoring"},pn={class:"config-label"},hn={key:0,class:"d-inline-block me-1 p-1 rounded-circle bg-warning rounded-circle"},gn=["title"],fn={key:1,class:"config-entry","data-testid":"generalconfig-network"},vn={class:"config-label"},bn={class:"config-text"},yn=["title"],wn={key:2,class:"config-entry","data-testid":"generalconfig-control"},kn={class:"config-label"},xn={class:"config-text"},Mn=["title"],$n=n(Ya,[["render",function(e,t,a,n,d,c){const u=x("EditIcon"),m=x("TitleModal");return i(),o("div",Wa,[r("div",Ja,[r("strong",Ka,s(e.$t("config.general.title")),1),r("div",Xa,s(d.title||"---"),1),r("button",{class:"config-button btn btn-link",type:"button",title:e.$t("config.main.edit"),onClick:t[0]||(t[0]=q((e=>c.openModal("titleModal")),["prevent"]))},[P(u,{size:"xs"}),P(m,{ref:"titleModal",onChanged:c.load},null,8,["onChanged"])],8,Qa)]),r("div",Za,[r("strong",en,s(e.$t("config.general.password")),1),tn,r("button",{class:"config-button btn btn-link",type:"button",title:e.$t("config.main.edit"),onClick:t[1]||(t[1]=q((e=>c.openModal("passwordModal")),["prevent"]))},[P(u,{size:"xs"})],8,an)]),r("div",nn,[r("strong",on,s(e.$t("config.general.telemetry")),1),r("div",rn,s(e.$t("config.general."+(c.telemetryEnabled?"on":"off"))),1),r("button",{class:"config-button btn btn-link",type:"button",title:e.$t("config.main.edit"),onClick:t[2]||(t[2]=q((e=>c.openModal("globalSettingsModal")),["prevent"]))},[P(u,{size:"xs"})],8,ln)]),r("div",sn,[r("strong",dn,s(e.$t("config.general.experimental")),1),r("div",cn,s(e.$t("config.general."+(c.hiddenFeatures?"on":"off"))),1),r("button",{class:"config-button btn btn-link",type:"button",title:e.$t("config.main.edit"),onClick:t[3]||(t[3]=q((e=>c.openModal("globalSettingsModal")),["prevent"]))},[P(u,{size:"xs"})],8,un)]),e.$hiddenFeatures()?(i(),o("div",mn,[r("strong",pn,s(e.$t("config.sponsor.title"))+" ðŸ§ª",1),r("div",{class:_(["config-text",c.sponsorStatus.cssClass])},[c.sponsorStatus.expiresSoon?(i(),o("span",hn)):T("",!0),l(" "+s(c.sponsorStatus.name||"---"),1)],2),r("button",{class:"config-button btn btn-link",type:"button",title:e.$t("config.main.edit"),onClick:t[4]||(t[4]=q((e=>c.openModal("sponsorModal")),["prevent"]))},[P(u,{size:"xs"})],8,gn)])):T("",!0),e.$hiddenFeatures()?(i(),o("div",fn,[r("strong",vn,s(e.$t("config.network.title"))+" ðŸ§ª",1),r("div",bn,s(c.networkStatus),1),r("button",{class:"config-button btn btn-link",type:"button",title:e.$t("config.main.edit"),onClick:t[5]||(t[5]=q((e=>c.openModal("networkModal")),["prevent"]))},[P(u,{size:"xs"})],8,yn)])):T("",!0),e.$hiddenFeatures()?(i(),o("div",wn,[r("strong",kn,s(e.$t("config.control.title"))+" ðŸ§ª",1),r("div",xn,s(c.controlStatus),1),r("button",{class:"config-button btn btn-link",type:"button",title:e.$t("config.main.edit"),onClick:t[6]||(t[6]=q((e=>c.openModal("controlModal")),["prevent"]))},[P(u,{size:"xs"})],8,Mn)])):T("",!0)])}],["__scopeId","data-v-acfedf69"]]),Tn={name:"Hems",mixins:[u]},Cn=[r("path",{fill:"currentColor",d:"M3 11q0 1.8 1.15 3.175T7.075 15.9l-.775-.775q-.275-.275-.275-.687t.275-.713q.3-.3.713-.3t.712.3L10.3 16.3q.3.3.3.7t-.3.7l-2.6 2.6q-.275.275-.7.275t-.725-.3Q6 20 6 19.6t.275-.7l.9-.95q-2.65-.3-4.412-2.287T1 11q0-2.925 2.038-4.962T8 4h2q.425 0 .713.288T11 5t-.288.713T10 6H8Q5.925 6 4.463 7.463T3 11m11 9q-.425 0-.712-.288T13 19v-5q0-.425.288-.712T14 13h7q.425 0 .713.288T22 14v5q0 .425-.288.713T21 20zm0-9q-.425 0-.712-.288T13 10V5q0-.425.288-.712T14 4h7q.425 0 .713.288T22 5v5q0 .425-.288.713T21 11zm1-2h5V6h-5z"},null,-1)],Vn=n(Tn,[["render",function(e,t,a,n,r,l){return i(),o("svg",{style:m(e.svgStyle),viewBox:"0 0 24 24"},Cn,4)}]]),Sn=n({name:"HemsModal",components:{YamlModal:Ut},emits:["changed"],data:()=>({defaultYaml:"#type: sma\n#allowcontrol: false\n#vendorid: AAAAAAAA\n#deviceid: BBBBBBBB\n".trim()})},[["render",function(e,t,a,n,o,r){const l=x("YamlModal");return i(),M(l,{id:"hemsModal",title:e.$t("config.hems.title"),description:e.$t("config.hems.description"),docs:"/docs/reference/configuration/hems",defaultYaml:o.defaultYaml,endpoint:"/config/hems",size:"md",onChanged:t[0]||(t[0]=t=>e.$emit("changed"))},null,8,["title","description","defaultYaml"])}]]),Pn={name:"Influx",mixins:[u]},qn=[r("path",{fill:"currentColor",d:"m23.778 14.482l-2.287-9.959c-.13-.545-.624-1.09-1.169-1.248L9.87.051C9.74 0 9.584 0 9.426 0c-.443 0-.909.18-1.222.443L.716 7.412C.3 7.776.092 8.504.222 9.024l2.445 10.662c.13.545.624 1.092 1.169 1.248l9.775 3.015c.13.051.285.051.443.051c.443 0 .91-.18 1.223-.443l8.007-7.435c.418-.39.624-1.092.494-1.64M10.962 2.417l7.175 2.21c.285.08.285.21 0 .286l-3.77.858c-.285.08-.674-.05-.883-.26l-2.626-2.834c-.235-.232-.184-.336.104-.26m4.47 12.872c.079.286-.105.444-.39.365l-7.748-2.392c-.285-.079-.338-.313-.13-.52l5.93-5.514c.209-.209.443-.13.52.156zM2.667 8.267l6.293-5.85c.21-.209.545-.18.754.025L12.86 5.85c.209.21.18.545-.026.754l-6.293 5.85c-.21.21-.545.181-.754-.025L2.64 9.024a.536.536 0 0 1 .026-.757zm1.536 9.284L2.54 10.244c-.08-.285.05-.34.234-.13L5.4 12.949c.209.209.285.624.209.909L4.462 17.55c-.079.285-.208.285-.26 0zm9.202 4.264l-8.217-2.522a.547.547 0 0 1-.364-.675l1.378-4.421a.547.547 0 0 1 .675-.365l8.216 2.522c.285.079.443.39.364.675L14.08 21.45a.553.553 0 0 1-.674.365zm7.279-5.98L15.2 20.93c-.209.209-.31.13-.234-.155l1.144-3.694c.079-.285.39-.573.674-.624l3.77-.858c.288-.076.339.054.13.234zm.598-1.09l-4.523 1.039a.534.534 0 0 1-.65-.39l-1.922-8.372a.534.534 0 0 1 .39-.65L19.1 5.335a.534.534 0 0 1 .649.39l1.923 8.371c.079.31-.102.596-.39.65Z"},null,-1)],In=n(Pn,[["render",function(e,t,a,n,r,l){return i(),o("svg",{style:m(e.svgStyle),viewBox:"0 0 24 24"},qn,4)}]]),On=["onUpdate:modelValue"],En=["onUpdate:modelValue"],Un=["onUpdate:modelValue"],Nn=["onUpdate:modelValue"],_n=["onUpdate:modelValue"],Ln=["onUpdate:modelValue"],Dn=["onClick"],Rn=["onClick"],jn=n({name:"InfluxModal",components:{FormRow:Gt,JsonModal:Ba},emits:["changed"],data:()=>({v1:!1}),methods:{showV1(e){return this.v1||e.user||e.password}}},[["render",function(e,t,a,n,l,d){const c=x("FormRow"),u=x("JsonModal");return i(),M(u,{id:"influxModal",title:e.$t("config.influx.title"),description:e.$t("config.influx.description"),docs:"/docs/reference/configuration/influx",endpoint:"/config/influx","state-key":"influx","data-testid":"influx-modal",onChanged:t[0]||(t[0]=t=>e.$emit("changed"))},{default:$((({values:t})=>[P(c,{id:"influxUrl",label:e.$t("config.influx.labelUrl"),example:"http://localhost:8086"},{default:$((()=>[E(r("input",{id:"influxUrl","onUpdate:modelValue":e=>t.url=e,type:"url",class:"form-control",required:""},null,8,On),[[U,t.url]])])),_:2},1032,["label"]),d.showV1(t)?T("",!0):(i(),M(c,{key:0,id:"influxOrg",label:e.$t("config.influx.labelOrg"),example:"home"},{default:$((()=>[E(r("input",{id:"influxOrg","onUpdate:modelValue":e=>t.org=e,class:"form-control",required:""},null,8,En),[[U,t.org]])])),_:2},1032,["label"])),P(c,{id:"influxDatabase",label:e.$t("config.influx.label"+(d.showV1(t)?"Database":"Bucket")),example:"evcc"},{default:$((()=>[E(r("input",{id:"influxDatabase","onUpdate:modelValue":e=>t.database=e,class:"form-control",required:""},null,8,Un),[[U,t.database]])])),_:2},1032,["label"]),d.showV1(t)?T("",!0):(i(),M(c,{key:1,id:"influxToken",label:e.$t("config.influx.labelToken"),help:e.$t("config.influx.descriptionToken")},{default:$((()=>[E(r("input",{id:"influxToken","onUpdate:modelValue":e=>t.token=e,class:"form-control",required:""},null,8,Nn),[[U,t.token]])])),_:2},1032,["label","help"])),d.showV1(t)?(i(),M(c,{key:2,id:"influxUser",label:e.$t("config.influx.labelUser"),optional:""},{default:$((()=>[E(r("input",{id:"influxUser","onUpdate:modelValue":e=>t.user=e,class:"form-control"},null,8,_n),[[U,t.user]])])),_:2},1032,["label"])):T("",!0),d.showV1(t)?(i(),M(c,{key:3,id:"influxPassword",label:e.$t("config.influx.labelPassword"),optional:""},{default:$((()=>[E(r("input",{id:"influxPassword","onUpdate:modelValue":e=>t.password=e,class:"form-control",type:"password",autocomplete:"off"},null,8,Ln),[[U,t.password]])])),_:2},1032,["label"])):T("",!0),r("p",null,[d.showV1(t)?(i(),o("button",{key:0,class:"btn btn-link btn-sm text-primary px-0",type:"button",onClick:e=>{t.user="",t.password="",l.v1=!1}},s(e.$t("config.influx.v2Support")),9,Dn)):(i(),o("button",{key:1,class:"btn btn-link btn-sm text-primary px-0",type:"button",onClick:e=>{t.token="",l.v1=!0}},s(e.$t("config.influx.v1Support")),9,Rn))])])),_:1},8,["title","description"])}]]),Bn=n({name:"MessagingModal",components:{YamlModal:Ut},emits:["changed"],data:()=>({defaultYaml:'#events:\n#  start:\n#    title: Charge started\n#    msg: Started charging in "${mode}" mode\n#  stop:\n#    title: Charge finished\n#    msg: Finished charging ${chargedEnergy:%.1fk}kWh in ${chargeDuration}.\n#  connect:\n#    title: Car connected\n#    msg: "Car connected at ${pvPower:%.1fk}kW PV"\n#  disconnect:\n#    title: Car disconnected\n#    msg: Car disconnected after ${connectedDuration}\n#  soc:\n#    title: Soc updated\n#    msg: Battery charged to ${vehicleSoc:%.0f}%\n#  guest:\n#    title: Unknown vehicle\n#    msg: Unknown vehicle, guest connected?\n\n#services:\n#- type: pushover\n#  app: # app id\n#  recipients:\n#  - # list of recipient ids\n#- type: telegram\n#  token: # bot id\n#  chats:\n#  - # list of chat ids\n#- type: email\n#  uri: smtp://<user>:<password>@<host>:<port>/?fromAddress=<from>&toAddresses=<to>\n#- type: ntfy\n#  uri: https://<host>/<topics>\n#  priority: <priority>\n#  tags: <tags>\n'.trim()})},[["render",function(e,t,a,n,o,r){const l=x("YamlModal");return i(),M(l,{id:"messagingModal",title:e.$t("config.messaging.title"),description:e.$t("config.messaging.description"),docs:"/docs/reference/configuration/messaging",defaultYaml:o.defaultYaml,endpoint:"/config/messaging","data-testid":"messaging-modal",onChanged:t[0]||(t[0]=t=>e.$emit("changed"))},null,8,["title","description","defaultYaml"])}]]);class An extends HTMLElement{connectedCallback(){this.setAttribute("data-shopicon",!0),this.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48"><path d="M0 0h48v48H0z" fill="none"/><path d="M8 22h32v4H8z"/></svg>'}}window.customElements.define("shopicon-regular-minus",An);const zn={name:"PropertyField",components:{VehicleIcon:A,SelectGroup:z},props:{id:String,property:String,masked:Boolean,placeholder:String,type:String,unit:String,size:String,scale:Number,required:Boolean,validValues:{type:Array,default:()=>[]},modelValue:[String,Number,Boolean,Object]},emits:["update:modelValue"],data:()=>({selectMode:!1}),computed:{inputType(){return this.masked?"password":["Number","Float","Duration"].includes(this.type)?"number":"text"},sizeClass(){return this.size?this.size:["Number","Float","Duration"].includes(this.type)?"w-50 w-min-200":""},endAlign(){return["Number","Float","Duration"].includes(this.type)},step(){return"Float"===this.type||"Duration"===this.type?"any":null},unitValue(){return this.unit?this.unit:"capacity"===this.property?"kWh":null},icons(){return"icon"===this.property},textarea(){return["accessToken","refreshToken","identifiers"].includes(this.property)},boolean(){return"Bool"===this.type},array(){return"StringList"===this.type},select(){return this.validValues.length>0},selectOptions(){if("object"==typeof this.validValues[0])return this.validValues;let e=[...this.validValues];return this.icons&&!this.required&&(e=["",...e]),e.map((e=>({key:e,name:this.$t(`config.options.${this.property}.${e||"none"}`)})))},value:{get(){return this.selectOptions.length>0&&!this.modelValue?this.required?this.selectOptions[0].key:"":this.scale?this.modelValue*this.scale:this.boolean?!0===this.modelValue:this.array?Array.isArray(this.modelValue)?this.modelValue.join("\n"):"":this.modelValue},set(e){let t=e;this.scale&&(t=e/this.scale),this.array&&(t=e?e.split("\n"):[]),this.$emit("update:modelValue",t)}}},methods:{toggleSelectMode(){this.$nextTick((()=>{this.selectMode=!this.selectMode}))}}},Fn=["id","type","step","placeholder","required","aria-describedby"],Hn=["id"],Yn={key:1,class:"d-flex flex-wrap"},Gn=["id","name","value"],Wn=["for","aria-label"],Jn={key:1},Kn={key:0,class:"me-2 mb-2 d-flex align-items-end"},Xn=["id"],Qn=["id"],Zn={key:0,value:""},ei=["value"],ti=["id","type","placeholder","required"],ai=["id","type","step","placeholder","required","autocomplete"],ni=n(zn,[["render",function(e,t,a,n,l,d){const c=x("VehicleIcon"),u=x("SelectGroup");return d.unitValue?(i(),o("div",{key:0,class:_(["input-group",d.sizeClass])},[E(r("input",{id:a.id,"onUpdate:modelValue":t[0]||(t[0]=e=>d.value=e),type:d.inputType,step:d.step,placeholder:a.placeholder,required:a.required,"aria-describedby":a.id+"_unit",class:_(["form-control",{"text-end":d.endAlign}])},null,10,Fn),[[F,d.value]]),r("span",{id:a.id+"_unit",class:"input-group-text"},s(d.unitValue),9,Hn)],2)):d.icons?(i(),o("div",Yn,[(i(!0),o(D,null,R(d.selectOptions,(({key:n})=>E((i(),o("div",{key:n,class:"me-2 mb-2"},[E(r("input",{id:`icon_${n}`,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),type:"radio",class:_(e.selectMode?"btn-check":"d-none"),name:a.property,value:n,onClick:t[2]||(t[2]=(...e)=>d.toggleSelectMode&&d.toggleSelectMode(...e))},null,10,Gn),[[Y,d.value]]),r("label",{class:_(["btn btn-outline-secondary",n===d.value?"active":""]),for:`icon_${n}`,"aria-label":n},[n?(i(),M(c,{key:0,name:n},null,8,["name"])):(i(),o("shopicon-regular-minus",Jn))],10,Wn)])),[[H,n===d.value||e.selectMode]]))),128)),e.selectMode?T("",!0):(i(),o("div",Kn,[r("a",{id:a.id,class:"text-muted",href:"#",onClick:t[3]||(t[3]=q(((...e)=>d.toggleSelectMode&&d.toggleSelectMode(...e)),["prevent"]))},"change",8,Xn)]))])):d.boolean?(i(),M(u,{key:2,id:a.id,class:"w-50",modelValue:d.value,"onUpdate:modelValue":t[4]||(t[4]=e=>d.value=e),options:[{value:!1,name:e.$t("config.options.boolean.no")},{value:!0,name:e.$t("config.options.boolean.yes")}]},null,8,["id","modelValue","options"])):d.select?E((i(),o("select",{key:3,id:a.id,"onUpdate:modelValue":t[5]||(t[5]=e=>d.value=e),class:_(["form-select",d.sizeClass])},[a.required?T("",!0):(i(),o("option",Zn,"---")),(i(!0),o(D,null,R(d.selectOptions,(({key:e,name:t},a)=>(i(),o(D,null,[null!==e&&null!==t?(i(),o("option",{key:e,value:e},s(t),9,ei)):(i(),o("hr",{key:a}))],64)))),256))],10,Qn)),[[G,d.value]]):d.textarea?E((i(),o("textarea",{key:4,id:a.id,"onUpdate:modelValue":t[6]||(t[6]=e=>d.value=e),class:_(["form-control",d.sizeClass]),type:d.inputType,placeholder:a.placeholder,required:a.required,rows:"4"},null,10,ti)),[[U,d.value]]):E((i(),o("input",{key:5,id:a.id,"onUpdate:modelValue":t[7]||(t[7]=e=>d.value=e),class:_(["form-control",d.sizeClass]),type:d.inputType,step:d.step,placeholder:a.placeholder,required:a.required,autocomplete:a.masked?"off":null},null,10,ai)),[[F,d.value]])}]]),ii={name:"PropertyEntry",components:{FormRow:Gt,PropertyField:ni},props:{id:String,Name:String,Required:Boolean,Description:String,Help:String,Example:String,Type:String,Mask:Boolean,ValidValues:Array,modelValue:[String,Number,Boolean,Object]},emits:["update:modelValue"],computed:{value:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}}}},oi=n(ii,[["render",function(e,t,a,n,o,r){const l=x("PropertyField"),s=x("FormRow");return i(),M(s,{id:a.id,optional:!a.Required,label:a.Description||`[${a.Name}]`,help:a.Description===a.Help?void 0:a.Help,example:a.Example},{default:$((()=>[P(l,{id:a.id,modelValue:r.value,"onUpdate:modelValue":t[0]||(t[0]=e=>r.value=e),masked:a.Mask,property:a.Name,type:a.Type,class:"me-2",required:a.Required,validValues:a.ValidValues},null,8,["id","modelValue","masked","property","type","required","validValues"])])),_:1},8,["id","optional","label","help","example"])}]]),ri={name:"Dropdown",mixins:[u]},li=[r("path",{fill:"currentColor",d:"M11.475 14.475L7.85 10.85q-.075-.075-.112-.162T7.7 10.5q0-.2.138-.35T8.2 10h7.6q.225 0 .363.15t.137.35q0 .05-.15.35l-3.625 3.625q-.125.125-.25.175T12 14.7t-.275-.05t-.25-.175"},null,-1)],si={key:0},di={key:0},ci={key:1},ui={key:0,class:"pt-2"},mi={key:0,class:"my-5"},pi=n({name:"PropertyCollapsible",components:{DropdownIcon:n(ri,[["render",function(e,t,a,n,r,l){return i(),o("svg",{style:m(e.svgStyle),viewBox:"0 0 24 24"},li,4)}]])},data:()=>({open:!1}),methods:{toggle(){this.open=!this.open}}},[["render",function(e,t,a,n,l,s){const d=x("DropdownIcon");return e.$slots.advanced||e.$slots.more?(i(),o("div",si,[r("button",{class:_(["btn btn-link btn-sm text-gray px-0 border-0 d-flex align-items-center mb-2",l.open?"text-primary":""]),type:"button",onClick:t[0]||(t[0]=(...e)=>s.toggle&&s.toggle(...e))},[l.open?(i(),o("span",di,"Hide advanced settings")):(i(),o("span",ci,"Show advanced settings")),P(d,{class:_(["icon",{iconUp:l.open}])},null,8,["class"])],2),P(W,null,{default:$((()=>[l.open?(i(),o("div",ui,[I(e.$slots,"advanced",{},void 0,!0),e.$slots.advanced&&e.$slots.more?(i(),o("hr",mi)):T("",!0),I(e.$slots,"more",{},void 0,!0)])):T("",!0)])),_:3})])):T("",!0)}],["__scopeId","data-v-9a17e7d6"]]),hi={name:"TestResult",props:{success:Boolean,failed:Boolean,unknown:Boolean,running:Boolean,result:Object,error:String},emits:["test"],components:{DeviceTags:Ma}},gi={class:"test-result my-4 p-4"},fi={class:"d-flex justify-content-between align-items-center"},vi={key:0},bi={key:1},yi={key:2,class:"text-success"},wi={key:3,class:"text-danger"},ki={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},xi={key:0,class:"divider"},Mi={key:1,class:"text-danger"},$i={key:2,class:"divider"},Ti={key:3},Ci=n(hi,[["render",function(e,t,a,n,l,d){const c=x("DeviceTags");return i(),o("div",gi,[r("div",fi,[r("strong",null,[r("span",null,s(e.$t("config.validation.label"))+": ",1),a.unknown?(i(),o("span",vi,s(e.$t("config.validation.unknown")),1)):T("",!0),a.running?(i(),o("span",bi,s(e.$t("config.validation.running")),1)):T("",!0),a.success?(i(),o("span",yi,s(e.$t("config.validation.success")),1)):T("",!0),a.failed?(i(),o("span",wi,s(e.$t("config.validation.failed")),1)):T("",!0)]),a.running?(i(),o("span",ki)):(i(),o("a",{key:1,href:"#",class:"alert-link",onClick:t[0]||(t[0]=q((t=>e.$emit("test")),["prevent"]))},s(e.$t("config.validation.validate")),1))]),a.error?(i(),o("hr",xi)):T("",!0),a.error?(i(),o("div",Mi,s(a.error),1)):T("",!0),a.result?(i(),o("hr",$i)):T("",!0),a.result?(i(),o("div",Ti,[P(c,{tags:a.result,class:"success-values"},null,8,["tags"])])):T("",!0)])}],["__scopeId","data-v-36dae936"]]),Vi="unknown",Si="success",Pi="failed",qi="running",Ii={data:()=>({testState:Vi,testError:null,testResult:null}),computed:{testRunning(){return this.testState===qi},testSuccess(){return this.testState===Si},testFailed(){return this.testState===Pi},testUnknown(){return this.testState===Vi}},methods:{resetTest(){this.testState=Vi,this.testError=null,this.testResult=null},async test(e){if(!this.$refs.form.reportValidity())return!1;this.testState=qi;try{const t=await e();for(const[e,{error:a}]of Object.entries(t.data.result))if(a)return this.testState=Pi,this.testResult=null,this.testError=`${e}: ${a}`,!1;return this.testResult=t.data.result,this.testError=null,this.testState=Si,!0}catch(Ai){console.error(Ai),this.testState=Pi,this.testResult=null,this.testError=Ai.response?.data?.error||Ai.message}return!1}}},Oi=p({name:"Modbus",components:{FormRow:Gt,PropertyField:ni},props:{capabilities:{type:Array,default:()=>[]},modbus:String,host:String,port:[Number,String],id:[Number,String],baudrate:[Number,String],comset:String,device:String,defaultPort:Number,defaultId:Number,defaultComset:String,defaultBaudrate:Number},emits:["update:modbus","update:id","update:host","update:port","update:device","update:baudrate","update:comset"],data:()=>({connection:"tcpip",protocol:"tcp"}),computed:{selectedModbus(){return"serial"===this.connection?"rs485serial":"rtu"===this.protocol?"rs485tcpip":"tcpip"},showConnectionOptions(){return this.capabilities.includes("rs485")},showProtocolOptions(){return"tcpip"===this.connection&&this.capabilities.includes("rs485")},comsetOptions:()=>["8N1","8E1"].map((e=>({key:e,name:e}))),baudrateOptions:()=>[1200,9600,19200,38400,57600,115200].map((e=>({key:e,name:`${e}`})))},watch:{selectedModbus(e){this.$emit("update:modbus",e)},options(e){this.setProtocolByCapabilities(e),this.$emit("update:modbus",this.selectedModbus)},modbus(e){e&&this.setConnectionAndProtocolByModbus(e)}},mounted(){this.setConnectionAndProtocolByModbus(this.modbus),this.$emit("update:modbus",this.selectedModbus)},methods:{setProtocolByCapabilities(e){this.protocol=e.includes("tcpip")?"tcp":"rtu"},setConnectionAndProtocolByModbus(e){switch(e){case"rs485serial":this.connection="serial",this.protocol="rtu";break;case"rs485tcpip":this.connection="tcpip",this.protocol="rtu";break;case"tcpip":this.connection="tcpip",this.protocol="tcp"}}}}),Ei={class:"btn-group",role:"group"},Ui=r("label",{class:"btn btn-outline-primary",for:"modbusTcpIp"},"Network",-1),Ni=r("label",{class:"btn btn-outline-primary",for:"modbusSerial"},"Serial / USB",-1),_i={key:1},Li={class:"btn-group",role:"group"},Di=r("label",{class:"btn btn-outline-primary",for:"modbusTcp"},"TCP",-1),Ri=r("label",{class:"btn btn-outline-primary",for:"modbusRtu"},"RTU",-1),ji={key:2},Bi=n(Oi,[["render",function(e,t,a,n,l,s){const d=x("FormRow"),c=x("PropertyField");return i(),o(D,null,[e.showConnectionOptions?(i(),M(d,{key:0,id:"modbusTcpIp",label:"Modbus Connection",help:"tcpip"===e.connection?"The device is addressable from evcc via LAN/Wifi.":"The device is diretly connected to evcc via a RS485 interface."},{default:$((()=>[r("div",Ei,[E(r("input",{id:"modbusTcpIp","onUpdate:modelValue":t[0]||(t[0]=t=>e.connection=t),type:"radio",class:"btn-check",name:"modbusConnection",value:"tcpip",autocomplete:"off"},null,512),[[Y,e.connection]]),Ui,E(r("input",{id:"modbusSerial","onUpdate:modelValue":t[1]||(t[1]=t=>e.connection=t),type:"radio",class:"btn-check",name:"modbusConnection",value:"serial",autocomplete:"off"},null,512),[[Y,e.connection]]),Ni])])),_:1},8,["help"])):T("",!0),P(d,{id:"modbusId",label:"Modbus ID"},{default:$((()=>[P(c,{id:"modbusId",property:"id",type:"Number",class:"me-2",required:"","model-value":e.id||e.defaultId||1,onChange:t[2]||(t[2]=t=>e.$emit("update:id",t.target.value))},null,8,["model-value"])])),_:1}),"tcpip"===e.connection?(i(),o("div",_i,[P(d,{id:"modbusHost",label:"IP address or hostname",help:"Example: 192.0.2.2"},{default:$((()=>[P(c,{id:"modbusHost",property:"host",type:"String",class:"me-2",required:"","model-value":e.host,onChange:t[3]||(t[3]=t=>e.$emit("update:host",t.target.value))},null,8,["model-value"])])),_:1}),P(d,{id:"modbusPort",label:"Port"},{default:$((()=>[P(c,{id:"modbusPort",property:"port",type:"Number",class:"me-2 w-50",required:"","model-value":e.port||e.defaultPort||502,onChange:t[4]||(t[4]=t=>e.$emit("update:port",t.target.value))},null,8,["model-value"])])),_:1}),e.showProtocolOptions?(i(),M(d,{key:0,id:"modbusTcp",label:"Modbus Protocol",help:"tcp"===e.protocol?"Device has native LAN/Wifi support or is connected through a RS485 to Ethernet adapter with protocol translation.":"Connection through a RS485 to Ethernet adapter without protocol translation."},{default:$((()=>[r("div",Li,[E(r("input",{id:"modbusTcp","onUpdate:modelValue":t[5]||(t[5]=t=>e.protocol=t),type:"radio",class:"btn-check",name:"modbusProtocol",value:"tcp",autocomplete:"off"},null,512),[[Y,e.protocol]]),Di,E(r("input",{id:"modbusRtu","onUpdate:modelValue":t[6]||(t[6]=t=>e.protocol=t),type:"radio",class:"btn-check",name:"modbusProtocol",value:"rtu",autocomplete:"off"},null,512),[[Y,e.protocol]]),Ri])])),_:1},8,["help"])):T("",!0)])):(i(),o("div",ji,[P(d,{id:"modbusDevice",label:"Device name",help:"Example: /dev/ttyUSB0"},{default:$((()=>[P(c,{id:"modbusDevice",property:"device",type:"String",class:"me-2",required:"","model-value":e.device,onChange:t[7]||(t[7]=t=>e.$emit("update:device",t.target.value))},null,8,["model-value"])])),_:1}),P(d,{id:"modbusBaudrate",label:"Baudrate"},{default:$((()=>[P(c,{id:"modbusBaudrate",property:"baudrate",type:"Number",class:"me-2 w-50","valid-values":e.baudrateOptions,required:"","model-value":e.baudrate||e.defaultBaudrate,onChange:t[8]||(t[8]=t=>e.$emit("update:baudrate",t.target.value))},null,8,["valid-values","model-value"])])),_:1}),P(d,{id:"modbusComset",label:"ComSet"},{default:$((()=>[P(c,{id:"modbusComset",property:"comset",type:"String",class:"me-2 w-50","valid-values":e.comsetOptions,required:"","model-value":e.comset||e.defaultComset||"8N1",onChange:t[9]||(t[9]=t=>e.$emit("update:comset",t.target.value))},null,8,["valid-values","model-value"])])),_:1})]))],64)}]]);var Ai={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function zi(e){return e.replace(RegExp("^"+(e.match(/^(\t| )+/)||"")[0],"gm"),"")}function Fi(e){return(e+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Hi(e,t){var a,n,i,o,r,l=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,s=[],d="",c=t||{},u=0;function m(e){var t=Ai[e[1]||""],a=s[s.length-1]==e;return t?t[1]?(a?s.pop():s.push(e),t[0|a]):t[0]:e}function p(){for(var e="";s.length;)e+=m(s[s.length-1]);return e}for(e=e.replace(/^\[(.+?)\]:\s*(.+)$/gm,(function(e,t,a){return c[t.toLowerCase()]=a,""})).replace(/^\n+|\n+$/g,"");i=l.exec(e);)n=e.substring(u,i.index),u=l.lastIndex,a=i[0],n.match(/[^\\](\\\\)*\\$/)||((r=i[3]||i[4])?a='<pre class="code '+(i[4]?"poetry":i[2].toLowerCase())+'"><code'+(i[2]?' class="language-'+i[2].toLowerCase()+'"':"")+">"+zi(Fi(r).replace(/^\n+|\n+$/g,""))+"</code></pre>":(r=i[6])?(r.match(/\./)&&(i[5]=i[5].replace(/^\d+/gm,"")),o=Hi(zi(i[5].replace(/^\s*[>*+.-]/gm,""))),">"==r?r="blockquote":(r=r.match(/\./)?"ol":"ul",o=o.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),a="<"+r+">"+o+"</"+r+">"):i[8]?a='<img src="'+Fi(i[8])+'" alt="'+Fi(i[7])+'">':i[10]?(d=d.replace("<a>",'<a href="'+Fi(i[11]||c[n.toLowerCase()])+'">'),a=p()+"</a>"):i[9]?a="<a>":i[12]||i[14]?a="<"+(r="h"+(i[14]?i[14].length:i[13]>"="?1:2))+">"+Hi(i[12]||i[15],c)+"</"+r+">":i[16]?a="<code>"+Fi(i[16])+"</code>":(i[17]||i[1])&&(a=m(i[17]||"--"))),d+=n,d+=a;return(d+e.substring(u)+p()).replace(/^\n+|\n+$/g,"")}const Yi=["innerHTML"],Gi=n({name:"MarkdownRenderer",props:{markdown:String},computed:{compiledMarkdown(){return Hi(this.markdown)}}},[["render",function(e,t,a,n,r,l){return i(),o("div",{innerHTML:l.compiledMarkdown},null,8,Yi)}]]),Wi={type:"template"};function Ji(e){return new Promise((t=>setTimeout(t,e)))}const Ki=["usage","modbus"],Xi={name:"MeterModal",components:{FormRow:Gt,PropertyEntry:oi,Modbus:Bi,TestResult:Ci,AddDeviceButton:he,PropertyCollapsible:pi,Markdown:Gi},mixins:[Ii],props:{id:Number,name:String,type:String},emits:["added","updated","removed"],data:()=>({isModalVisible:!1,templates:[],products:[],templateName:null,template:null,saving:!1,selectedType:null,loadingTemplate:!1,values:{...Wi}}),computed:{modalTitle(){return this.isNew?this.meterType?this.$t(`config.${this.meterType}.titleAdd`):this.$t("config.meter.titleChoice"):this.$t(`config.${this.meterType}.titleEdit`)},meterType(){return this.type||this.selectedType},templateOptions(){return this.products.filter((e=>"generic"!==e.group))},genericOptions(){return this.products.filter((e=>"generic"===e.group))},templateParams(){return(this.template?.Params||[]).filter((e=>!Ki.includes(e.Name))).map((e=>("battery"===this.meterType&&"capacity"===e.Name&&(e.Advanced=!1),e)))},normalParams(){return this.templateParams.filter((e=>!e.Advanced))},advancedParams(){return this.templateParams.filter((e=>e.Advanced))},modbus(){return(this.template?.Params||[]).find((e=>"modbus"===e.Name))},modbusCapabilities(){return this.modbus?.Choice||[]},modbusDefaults(){const{ID:e,Comset:t,Baudrate:a,Port:n}=this.modbus||{};return{id:e,comset:t,baudrate:a,port:n}},description(){return this.template?.Requirements?.Description},apiData(){return{template:this.templateName,...this.modbusDefaults,...this.values,usage:this.meterType}},isNew(){return void 0===this.id},isDeletable(){return!this.isNew}},watch:{isModalVisible(e){e&&(this.selectedType=null,this.reset(),this.resetTest(),this.loadProducts(),void 0!==this.id&&this.loadConfiguration())},meterType(){this.loadProducts()},templateName(){this.loadTemplate()},values:{handler(){this.resetTest()},deep:!0}},mounted(){this.$refs.modal.addEventListener("show.bs.modal",this.modalVisible),this.$refs.modal.addEventListener("hide.bs.modal",this.modalInvisible)},unmounted(){this.$refs.modal?.removeEventListener("show.bs.modal",this.modalVisible),this.$refs.modal?.removeEventListener("hide.bs.modal",this.modalInvisible)},methods:{reset(){this.values={...Wi},this.resetTest()},async loadConfiguration(){try{const e=(await S.get(`config/devices/meter/${this.id}`)).data.result;this.values=e.config,this.applyDefaultsFromTemplate(),this.templateName=this.values.template}catch(Ai){console.error(Ai)}},async loadProducts(){if(this.isModalVisible&&this.meterType)try{const e={params:{usage:this.meterType}};this.products=(await S.get("config/products/meter",e)).data.result}catch(Ai){console.error(Ai)}},async loadTemplate(){this.template=null,this.loadingTemplate=!0;try{const e={params:{lang:this.$i18n?.locale,name:this.templateName}},t=await S.get("config/templates/meter",e);this.template=t.data.result,this.applyDefaultsFromTemplate()}catch(Ai){console.error(Ai)}this.loadingTemplate=!1},applyDefaultsFromTemplate(){(this.template?.Params||[]).filter((e=>e.Default&&!this.values[e.Name])).forEach((e=>{this.values[e.Name]=e.Default}))},async create(){if(this.testUnknown){if(!(await this.test(this.testMeter)))return;await Ji(100)}this.saving=!0;try{const e=await S.post("config/devices/meter",this.apiData),{name:t}=e.data.result;this.$emit("added",this.meterType,t),this.$emit("updated"),this.modalInvisible()}catch(Ai){console.error(Ai),alert("create failed")}this.saving=!1},async testManually(){await this.test(this.testMeter)},async testMeter(){let e="config/test/meter";return this.isNew||(e+=`/merge/${this.id}`),await S.post(e,this.apiData)},async update(){if(this.testUnknown){if(!(await this.test(this.testMeter)))return;await Ji(250)}this.saving=!0;try{await S.put(`config/devices/meter/${this.id}`,this.apiData),this.$emit("updated"),this.modalInvisible()}catch(Ai){console.error(Ai),alert("update failed")}this.saving=!1},async remove(){try{await S.delete(`config/devices/meter/${this.id}`),this.$emit("removed",this.meterType,this.name),this.$emit("updated"),this.modalInvisible()}catch(Ai){console.error(Ai),alert("delete failed")}},modalVisible(){this.isModalVisible=!0},modalInvisible(){this.isModalVisible=!1},selectType(e){this.selectedType=e},templateChanged(){this.reset()}}},Qi=e=>(d("data-v-8407e33a"),e=e(),c(),e),Zi={id:"meterModal",ref:"modal",class:"modal fade text-dark","data-bs-backdrop":"true",tabindex:"-1",role:"dialog","aria-hidden":"true","data-testid":"meter-modal"},eo={class:"modal-dialog modal-dialog-centered",role:"document"},to={class:"modal-content"},ao={class:"modal-header"},no={class:"modal-title"},io=Qi((()=>r("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),oo={class:"modal-body"},ro={key:0},lo={key:1,ref:"form",class:"container mx-0 px-0"},so=["disabled"],co=["value"],uo={key:0,disabled:""},mo=["value"],po={key:0},ho={key:4,class:"my-4 d-flex justify-content-between"},go={key:1,type:"button",class:"btn btn-link text-muted","data-bs-dismiss":"modal"},fo=["disabled"],vo={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},bo=n(Xi,[["render",function(e,t,a,n,d,c){const u=x("AddDeviceButton"),m=x("FormRow"),p=x("Markdown"),h=x("Modbus"),g=x("PropertyEntry"),f=x("PropertyCollapsible"),v=x("TestResult");return i(),M(X,{to:"body"},[r("div",Zi,[r("div",eo,[r("div",to,[r("div",ao,[r("h5",no,s(c.modalTitle),1),io]),r("div",oo,[c.meterType?(i(),o("form",lo,[P(m,{id:"meterTemplate",label:e.$t("config.meter.template")},{default:$((()=>[E(r("select",{id:"meterTemplate","onUpdate:modelValue":t[2]||(t[2]=e=>d.templateName=e),onChange:t[3]||(t[3]=(...e)=>c.templateChanged&&c.templateChanged(...e)),disabled:!c.isNew,class:"form-select w-100"},[(i(!0),o(D,null,R(c.genericOptions,(e=>(i(),o("option",{key:e.name,value:e.template},s(e.name),9,co)))),128)),c.genericOptions.length?(i(),o("option",uo," â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ")):T("",!0),(i(!0),o(D,null,R(c.templateOptions,(e=>(i(),o("option",{key:e.name,value:e.template},s(e.name),9,mo)))),128))],40,so),[[G,d.templateName]])])),_:1},8,["label"]),d.loadingTemplate?(i(),o("p",po,"Loading ...")):T("",!0),c.description?(i(),M(p,{key:1,markdown:c.description,class:"my-4"},null,8,["markdown"])):T("",!0),c.modbus?(i(),M(h,{key:2,modbus:d.values.modbus,"onUpdate:modbus":t[4]||(t[4]=e=>d.values.modbus=e),id:d.values.id,"onUpdate:id":t[5]||(t[5]=e=>d.values.id=e),host:d.values.host,"onUpdate:host":t[6]||(t[6]=e=>d.values.host=e),port:d.values.port,"onUpdate:port":t[7]||(t[7]=e=>d.values.port=e),device:d.values.device,"onUpdate:device":t[8]||(t[8]=e=>d.values.device=e),baudrate:d.values.baudrate,"onUpdate:baudrate":t[9]||(t[9]=e=>d.values.baudrate=e),comset:d.values.comset,"onUpdate:comset":t[10]||(t[10]=e=>d.values.comset=e),defaultId:c.modbus.ID,defaultComset:c.modbus.Comset,defaultBaudrate:c.modbus.Baudrate,defaultPort:c.modbus.Port,capabilities:c.modbusCapabilities},null,8,["modbus","id","host","port","device","baudrate","comset","defaultId","defaultComset","defaultBaudrate","defaultPort","capabilities"])):T("",!0),(i(!0),o(D,null,R(c.normalParams,(e=>(i(),M(g,J({key:e.Name,id:`meterParam${e.Name}`,ref_for:!0},e,{modelValue:d.values[e.Name],"onUpdate:modelValue":t=>d.values[e.Name]=t}),null,16,["id","modelValue","onUpdate:modelValue"])))),128)),P(f,null,K({_:2},[c.advancedParams.length?{name:"advanced",fn:$((()=>[(i(!0),o(D,null,R(c.advancedParams,(e=>(i(),M(g,J({key:e.Name,id:`meterParam${e.Name}`,ref_for:!0},e,{modelValue:d.values[e.Name],"onUpdate:modelValue":t=>d.values[e.Name]=t}),null,16,["id","modelValue","onUpdate:modelValue"])))),128))])),key:"0"}:void 0]),1024),d.templateName?(i(),M(v,{key:3,success:e.testSuccess,failed:e.testFailed,unknown:e.testUnknown,running:e.testRunning,result:e.testResult,error:e.testError,onTest:c.testManually},null,8,["success","failed","unknown","running","result","error","onTest"])):T("",!0),d.templateName?(i(),o("div",ho,[c.isDeletable?(i(),o("button",{key:0,type:"button",class:"btn btn-link text-danger",onClick:t[11]||(t[11]=q(((...e)=>c.remove&&c.remove(...e)),["prevent"]))},s(e.$t("config.meter.delete")),1)):(i(),o("button",go,s(e.$t("config.meter.cancel")),1)),r("button",{type:"submit",class:"btn btn-primary",disabled:e.testRunning||d.saving,onClick:t[12]||(t[12]=q((e=>c.isNew?c.create():c.update()),["prevent"]))},[d.saving?(i(),o("span",vo)):T("",!0),l(" "+s(e.testUnknown?e.$t("config.meter.validateSave"):e.$t("config.meter.save")),1)],8,fo)])):T("",!0)],512)):(i(),o("div",ro,[P(u,{title:"Add solar meter",class:"mb-4 addButton",onClick:t[0]||(t[0]=e=>c.selectType("pv"))}),P(u,{title:"Add battery meter",class:"addButton",onClick:t[1]||(t[1]=e=>c.selectType("battery"))})]))])])])],512)])}],["__scopeId","data-v-8407e33a"]]),yo={name:"ModbusProxy",mixins:[u]},wo=[r("path",{fill:"currentColor",d:"M15 19v-1h-2q-.825 0-1.412-.587T11 16V8H9v1q0 .825-.587 1.413T7 11H4q-.825 0-1.412-.587T2 9V5q0-.825.588-1.412T4 3h3q.825 0 1.413.588T9 5v1h6V5q0-.825.588-1.412T17 3h3q.825 0 1.413.588T22 5v4q0 .825-.587 1.413T20 11h-3q-.825 0-1.412-.587T15 9V8h-2v8h2v-1q0-.825.588-1.412T17 13h3q.825 0 1.413.588T22 15v4q0 .825-.587 1.413T20 21h-3q-.825 0-1.412-.587T15 19M4 5v4zm13 10v4zm0-10v4zm0 4h3V5h-3zm0 10h3v-4h-3zM4 9h3V5H4z"},null,-1)],ko=n(yo,[["render",function(e,t,a,n,r,l){return i(),o("svg",{style:m(e.svgStyle),viewBox:"0 0 24 24"},wo,4)}]]),xo=n({name:"ModbusProxyModal",components:{YamlModal:Ut},emits:["changed"],data:()=>({defaultYaml:'#- port: 5021\n#  uri: 192.0.2.2:502\n#- port: 5022\n#  device: /dev/ttyUSB0\n#  baudrate: 9600\n#  comset: "8N1"\n#- port: 5023\n#  uri: 192.0.2.3:502\n#  rtu: true\n'.trim()})},[["render",function(e,t,a,n,o,r){const l=x("YamlModal");return i(),M(l,{id:"modbusProxyModal",title:e.$t("config.modbusproxy.title"),description:e.$t("config.modbusproxy.description"),docs:"/docs/reference/configuration/modbusproxy",defaultYaml:o.defaultYaml,endpoint:"/config/modbusproxy",size:"md",onChanged:t[0]||(t[0]=t=>e.$emit("changed"))},null,8,["title","description","defaultYaml"])}]]),Mo={name:"Mqtt",mixins:[u]},$o=[r("g",null,[r("path",{fill:"currentColor",d:"M7.1,180.6v117.1c0,8.4,6.8,15.3,15.3,15.3H142C141,239.8,80.9,180.7,7.1,180.6z"}),r("path",{fill:"currentColor",d:"M7.1,84.1v49.8c99,0.9,179.4,80.7,180.4,179.1h51.7C238.2,186.6,134.5,84.2,7.1,84.1z"}),r("path",{fill:"currentColor",d:"M312.9,297.6V193.5C278.1,107.2,207.3,38.9,119,7.1H22.4c-8.4,0-15.3,6.8-15.3,15.3v15\n\t\t\tc152.6,0.9,276.6,124,277.6,275.6h13C306.1,312.9,312.9,306.1,312.9,297.6z"}),r("path",{fill:"currentColor",d:"M272.6,49.8c14.5,14.4,28.6,31.7,40.4,47.8V22.4c0-8.4-6.8-15.3-15.3-15.3h-77.3\n\t\t\tC238.4,19.7,256.6,33.9,272.6,49.8z"})],-1)],To=n(Mo,[["render",function(e,t,a,n,r,l){return i(),o("svg",{style:m(e.svgStyle),viewBox:"-40 -40 400 400"},$o,4)}]]),Co=["onUpdate:modelValue"],Vo=["onUpdate:modelValue"],So=["onUpdate:modelValue"],Po=["onUpdate:modelValue"],qo=["onUpdate:modelValue"],Io={class:"d-flex"},Oo=["onUpdate:modelValue"],Eo={class:"form-check-label ms-2",for:"mqttInsecure"},Uo=n({name:"MqttModal",components:{FormRow:Gt,JsonModal:Ba},emits:["changed"]},[["render",function(e,t,a,n,o,l){const d=x("FormRow"),c=x("JsonModal");return i(),M(c,{id:"mqttModal",title:e.$t("config.mqtt.title"),description:e.$t("config.mqtt.description"),docs:"/docs/reference/configuration/mqtt",endpoint:"/config/mqtt","state-key":"mqtt","data-testid":"mqtt-modal",onChanged:t[0]||(t[0]=t=>e.$emit("changed"))},{default:$((({values:t})=>[P(d,{id:"mqttBroker",label:e.$t("config.mqtt.labelBroker"),example:"localhost:1883"},{default:$((()=>[E(r("input",{id:"mqttBroker","onUpdate:modelValue":e=>t.broker=e,class:"form-control",required:""},null,8,Co),[[U,t.broker]])])),_:2},1032,["label"]),r("h6",null,s(e.$t("config.mqtt.publishing")),1),P(d,{id:"mqttTopic",label:e.$t("config.mqtt.labelTopic"),help:e.$t("config.mqtt.descriptionTopic"),example:"evcc",optional:""},{default:$((()=>[E(r("input",{id:"mqttTopic","onUpdate:modelValue":e=>t.topic=e,class:"form-control"},null,8,Vo),[[U,t.topic]])])),_:2},1032,["label","help"]),P(d,{id:"mqttClientId",label:e.$t("config.mqtt.labelClientId"),help:e.$t("config.mqtt.descriptionClientId"),optional:""},{default:$((()=>[E(r("input",{id:"mqttClientId","onUpdate:modelValue":e=>t.clientID=e,class:"form-control"},null,8,So),[[U,t.clientID]])])),_:2},1032,["label","help"]),r("h6",null,s(e.$t("config.mqtt.authentication")),1),P(d,{id:"mqttUser",label:e.$t("config.mqtt.labelUser"),optional:""},{default:$((()=>[E(r("input",{id:"mqttUser","onUpdate:modelValue":e=>t.user=e,class:"form-control"},null,8,Po),[[U,t.user]])])),_:2},1032,["label"]),P(d,{id:"mqttPassword",label:e.$t("config.mqtt.labelPassword"),optional:""},{default:$((()=>[E(r("input",{id:"mqttPassword","onUpdate:modelValue":e=>t.password=e,class:"form-control",type:"password",autocomplete:"off"},null,8,qo),[[U,t.password]])])),_:2},1032,["label"]),P(d,{id:"mqttInsecure",label:e.$t("config.mqtt.labelInsecure")},{default:$((()=>[r("div",Io,[E(r("input",{class:"form-check-input",id:"mqttInsecure",type:"checkbox","onUpdate:modelValue":e=>t.insecure=e},null,8,Oo),[[Q,t.insecure]]),r("label",Eo,s(e.$t("config.mqtt.labelCheckInsecure")),1)])])),_:2},1032,["label"])])),_:1},8,["title","description"])}]]),No={name:"NetworkModal",components:{FormRow:Gt,JsonModal:Ba},emits:["changed"]},_o={class:"btn-group",role:"group"},Lo=["onUpdate:modelValue"],Do=r("label",{class:"btn btn-outline-primary",for:"networkSchemaHttp"},"HTTP",-1),Ro=["onUpdate:modelValue"],jo=r("label",{class:"btn btn-outline-primary",for:"networkSchemaHttps"},"HTTPS",-1),Bo=["onUpdate:modelValue"],Ao=["onUpdate:modelValue"],zo=n(No,[["render",function(e,t,a,n,o,l){const s=x("FormRow"),d=x("JsonModal");return i(),M(d,{id:"networkModal",title:e.$t("config.network.title"),endpoint:"/config/network","state-key":"network","disable-remove":"","data-testid":"network-modal",onChanged:t[0]||(t[0]=t=>e.$emit("changed"))},{default:$((({values:t})=>[P(s,{id:"networkSchema",label:e.$t("config.network.labelSchema"),help:e.$t("config.network.descriptionSchema")},{default:$((()=>[r("div",_o,[E(r("input",{id:"networkSchemaHttp","onUpdate:modelValue":e=>t.schema=e,type:"radio",class:"btn-check",name:"networkSchema",value:"http",autocomplete:"off"},null,8,Lo),[[Y,t.schema]]),Do,E(r("input",{id:"networkSchemaHttps","onUpdate:modelValue":e=>t.schema=e,type:"radio",class:"btn-check",name:"networkSchema",value:"https",autocomplete:"off"},null,8,Ro),[[Y,t.schema]]),jo])])),_:2},1032,["label","help"]),P(s,{id:"networkHost",label:e.$t("config.network.labelHost"),help:e.$t("config.network.descriptionHost"),example:"evcc.local"},{default:$((()=>[E(r("input",{id:"networkHost","onUpdate:modelValue":e=>t.host=e,class:"form-control"},null,8,Bo),[[U,t.host]])])),_:2},1032,["label","help"]),P(s,{id:"networkPort",label:e.$t("config.network.labelPort"),help:e.$t("config.network.descriptionPort")},{default:$((()=>[E(r("input",{id:"networkPort","onUpdate:modelValue":e=>t.port=e,class:"form-control w-50 me-2 w-50",type:"number",example:"7070"},null,8,Ao),[[U,t.port]])])),_:2},1032,["label","help"])])),_:1},8,["title"])}]]),Fo={name:"Notification",mixins:[u]},Ho=[r("path",{fill:"currentColor",d:"M5 19q-.425 0-.712-.288T4 18t.288-.712T5 17h1v-7q0-2.075 1.25-3.687T10.5 4.2v-.7q0-.625.438-1.062T12 2t1.063.438T13.5 3.5v.7q2 .5 3.25 2.113T18 10v7h1q.425 0 .713.288T20 18t-.288.713T19 19zm7 3q-.825 0-1.412-.587T10 20h4q0 .825-.587 1.413T12 22m-4-5h8v-7q0-1.65-1.175-2.825T12 6T9.175 7.175T8 10zm-5-7q-.425 0-.712-.325t-.238-.75q.2-1.875 1.05-3.488t2.175-2.812q.325-.275.738-.25t.662.375t.2.75t-.375.7q-.975.925-1.6 2.15T4.075 9q-.05.425-.35.713T3 10m18 0q-.425 0-.725-.288T19.925 9q-.2-1.425-.825-2.65T17.5 4.2q-.325-.3-.375-.7t.2-.75t.663-.375t.737.25q1.325 1.2 2.175 2.812t1.05 3.488q.05.425-.237.75T21 10"},null,-1)],Yo=n(Fo,[["render",function(e,t,a,n,r,l){return i(),o("svg",{style:m(e.svgStyle),viewBox:"0 0 24 24"},Ho,4)}]]),Go={name:"SponsorTokenExpires",mixins:[L],props:{expiresSoon:Boolean,expiresAt:String,name:String},computed:{inXDays(){return this.fmtTimeAgo(new Date(this.expiresAt)-new Date)},isTrial(){return this.name===Z}}},Wo={key:0,class:"alert alert-warning my-4",role:"alert"},Jo={href:"https://sponsor.evcc.io",target:"_blank",class:"text-danger"},Ko={key:0,class:"d-block mt-2"},Xo={name:"SponsorModal",components:{FormRow:Gt,JsonModal:Ba,Sponsor:ee,SponsorTokenExpires:n(Go,[["render",function(e,t,a,n,d,c){const u=x("i18n-t");return a.expiresSoon?(i(),o("div",Wo,[P(u,{tag:"div",keypath:"settings.sponsorToken.expires",scope:"global"},{inXDays:$((()=>[l(s(c.inXDays),1)])),getNewToken:$((()=>[r("a",Jo,s(e.$t("settings.sponsorToken.getNew")),1)])),_:1}),c.isTrial?T("",!0):(i(),o("em",Ko,s(e.$t("settings.sponsorToken.hint")),1))])):T("",!0)}]])},emits:["changed"],data:()=>({showForm:!1}),methods:{transformReadValues:()=>({token:""})},computed:{sponsor:()=>O?.state?.sponsor,hasToken(){const e=this.sponsor?.name||"";return""!==e&&e!==te},sponsorTokenLabel(){return this.hasToken?this.$t("config.sponsor.changeToken"):this.$t("config.sponsor.addToken")}}},Qo=e=>(d("data-v-d0e75c9d"),e=e(),c(),e),Zo={class:"mt-4 mb-3"},er={key:1},tr=Qo((()=>r("hr",null,null,-1))),ar=["onUpdate:modelValue"],nr=n(Xo,[["render",function(e,t,a,n,l,d){const c=x("SponsorTokenExpires"),u=x("Sponsor"),m=x("FormRow"),p=x("JsonModal");return i(),M(p,{id:"sponsorModal",title:`${e.$t("config.sponsor.title")} ðŸ’š`,description:e.$t("config.sponsor.description"),"error-message":e.$t("config.sponsor.error"),endpoint:"/config/sponsortoken","transform-read-values":d.transformReadValues,"data-testid":"sponsor-modal",size:"lg","no-buttons":!e.showForm,"disable-remove":!d.hasToken,onChanged:t[1]||(t[1]=t=>e.$emit("changed")),onOpen:t[2]||(t[2]=t=>e.showForm=!1)},{default:$((({values:a})=>[P(c,ae(ne(d.sponsor)),null,16),r("div",Zo,[P(u,ae(ne(d.sponsor)),null,16)]),e.showForm?(i(),o("div",er,[tr,P(m,{id:"sponsorToken",label:d.sponsorTokenLabel,help:e.$t("config.sponsor.descriptionToken",{url:"https://sponsor.evcc.io/"}),"docs-link":"/docs/sponsorship",class:"mt-4"},{default:$((()=>[E(r("textarea",{id:"sponsorToken","onUpdate:modelValue":e=>a.token=e,required:"",rows:"5",spellcheck:"false",class:"form-control"},null,8,ar),[[U,a.token]])])),_:2},1032,["label","help"])])):(i(),o("button",{key:0,type:"button",class:"btn btn-link text-muted btn-form",onClick:t[0]||(t[0]=t=>e.showForm=!e.showForm)},s(d.sponsorTokenLabel),1))])),_:1},8,["title","description","error-message","transform-read-values","no-buttons","disable-remove"])}],["__scopeId","data-v-d0e75c9d"]]),ir=n({name:"TariffsModal",components:{YamlModal:Ut},emits:["changed"],data:()=>({defaultYaml:"#currency: EUR\n\n#grid: # price using energy from the grid\n#  type: fixed\n#  price: 0.294 # EUR/kWh\n\n#feedin: # price for feeding solar energy to the grid\n#  type: fixed\n#  price: 0.08 # EUR/kWh\n\n#co2: # carbon intensity forecast data\n#  type: grÃ¼nstromindex\n#  zip: <zip>\n".trim()})},[["render",function(e,t,a,n,o,r){const l=x("YamlModal");return i(),M(l,{id:"tariffsModal",title:e.$t("config.tariffs.title"),description:e.$t("config.tariffs.description"),docs:"/docs/reference/configuration/tariffs",defaultYaml:o.defaultYaml,endpoint:"/config/tariffs","data-testid":"tariffs-modal",onChanged:t[0]||(t[0]=t=>e.$emit("changed"))},null,8,["title","description","defaultYaml"])}]]),or={type:"template",icon:"car"};function rr(e){return new Promise((t=>setTimeout(t,e)))}const lr=["minCurrent","maxCurrent","priority","identifiers","phases","mode"],sr={name:"VehicleModal",components:{FormRow:Gt,PropertyField:ni,TestResult:Ci,SelectGroup:z,PropertyCollapsible:pi,PropertyEntry:oi,Markdown:Gi},mixins:[Ii],props:{id:Number},emits:["vehicle-changed"],data:()=>({isModalVisible:!1,templates:[],products:[],saving:!1,templateName:null,template:null,values:{...or},loadingTemplate:!1}),computed:{templateOptions(){return{online:this.products.filter((e=>!e.group&&"offline"!==e.template)),generic:this.products.filter((e=>"generic"===e.group)),scooter:this.products.filter((e=>"scooter"===e.group))}},templateParams(){return(this.template?.Params||[]).filter((e=>!lr.includes(e.Name))).map((e=>("title"!==e.Name&&"icon"!==e.Name||(e.Required=!0,e.Advanced=!1),e)))},normalParams(){return this.templateParams.filter((e=>!e.Advanced))},advancedParams(){return this.templateParams.filter((e=>e.Advanced))},description(){return this.template?.Requirements?.Description},apiData(){const e={template:this.templateName,...this.values};return Array.isArray(e.identifiers)&&(e.identifiers=e.identifiers.map((e=>e.trim())).filter((e=>e))),e},isNew(){return void 0===this.id},isDeletable(){return!this.isNew},priorityOptions(){const e=Array.from({length:11},((e,t)=>({key:t,name:`${t}`})));return e[0].name="0 (default)",e[0].key=void 0,e[10].name="10 (highest)",e}},watch:{isModalVisible(e){e&&(this.reset(),this.templateName="offline",this.resetTest(),this.loadProducts(),void 0!==this.id&&this.loadConfiguration())},templateName(){this.loadTemplate()},values:{handler(){this.resetTest()},deep:!0}},mounted(){this.$refs.modal.addEventListener("show.bs.modal",this.modalVisible),this.$refs.modal.addEventListener("hide.bs.modal",this.modalInvisible)},unmounted(){this.$refs.modal?.removeEventListener("show.bs.modal",this.modalVisible),this.$refs.modal?.removeEventListener("hide.bs.modal",this.modalInvisible)},methods:{reset(){this.values={...or},this.resetTest()},async loadConfiguration(){try{const e=(await S.get(`config/devices/vehicle/${this.id}`)).data.result;this.values=e.config,this.applyDefaultsFromTemplate(),this.templateName=this.values.template}catch(Ai){console.error(Ai)}},async loadProducts(){try{this.products=(await S.get("config/products/vehicle")).data.result}catch(Ai){console.error(Ai)}},async loadTemplate(){this.template=null,this.loadingTemplate=!0;try{const e={params:{lang:this.$i18n?.locale,name:this.templateName}};this.template=(await S.get("config/templates/vehicle",e)).data.result,this.applyDefaultsFromTemplate()}catch(Ai){console.error(Ai)}this.loadingTemplate=!1},applyDefaultsFromTemplate(){(this.template?.Params||[]).filter((e=>e.Default&&!this.values[e.Name])).forEach((e=>{this.values[e.Name]=e.Default}))},async create(){if(this.testUnknown){if(!(await this.test(this.testVehicle)))return;await rr(250)}this.saving=!0;try{await S.post("config/devices/vehicle",this.apiData),this.$emit("vehicle-changed"),this.modalInvisible()}catch(Ai){console.error(Ai),alert("create failed")}this.saving=!1},async testManually(){await this.test(this.testVehicle)},async testVehicle(){let e="config/test/vehicle";return this.isNew||(e+=`/merge/${this.id}`),await S.post(e,this.apiData)},async update(){if(this.testUnknown){if(!(await this.test(this.testVehicle)))return;await rr(250)}this.saving=!0;try{await S.put(`config/devices/vehicle/${this.id}`,this.apiData),this.$emit("vehicle-changed"),this.modalInvisible()}catch(Ai){console.error(Ai),alert("update failed")}this.saving=!1},async remove(){try{await S.delete(`config/devices/vehicle/${this.id}`),this.$emit("vehicle-changed"),this.modalInvisible()}catch(Ai){console.error(Ai),alert("delete failed")}},modalVisible(){this.isModalVisible=!0},modalInvisible(){this.isModalVisible=!1},templateChanged(){this.reset()}}},dr=e=>(d("data-v-a893535e"),e=e(),c(),e),cr={id:"vehicleModal",ref:"modal",class:"modal fade text-dark","data-bs-backdrop":"true",tabindex:"-1",role:"dialog","aria-hidden":"true","data-testid":"vehicle-modal"},ur={class:"modal-dialog modal-dialog-centered",role:"document"},mr={class:"modal-content"},pr={class:"modal-header"},hr={class:"modal-title"},gr=dr((()=>r("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))),fr={class:"modal-body"},vr={ref:"form",class:"container mx-0 px-0"},br=["disabled"],yr={value:"offline"},wr=dr((()=>r("option",{disabled:""},"----------",-1))),kr=["label"],xr=["value"],Mr=["label"],$r=["value"],Tr=["label"],Cr=["value"],Vr={key:0},Sr=dr((()=>r("h6",{class:"mt-3"},"Charging settings",-1))),Pr={class:"row mb-3"},qr={key:3,class:"my-4 d-flex justify-content-between"},Ir={key:1,type:"button",class:"btn btn-link text-muted","data-bs-dismiss":"modal"},Or=["disabled"],Er={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Ur={name:"Config",components:{AddDeviceButton:he,CircuitsIcon:ve,CircuitsModal:Nt,ControlModal:la,DeviceCard:ya,DeviceTags:Ma,EebusIcon:Ca,EebusModal:Va,GeneralConfig:$n,HemsIcon:Vn,HemsModal:Sn,InfluxIcon:In,InfluxModal:jn,MessagingModal:Bn,MeterModal:bo,ModbusProxyIcon:ko,ModbusProxyModal:xo,MqttIcon:To,MqttModal:Uo,NetworkModal:zo,NotificationIcon:Yo,SponsorModal:nr,TariffsModal:ir,TopHeader:a,VehicleIcon:A,VehicleModal:n(sr,[["render",function(e,t,a,n,d,c){const u=x("FormRow"),m=x("Markdown"),p=x("PropertyEntry"),h=x("PropertyField"),g=x("SelectGroup"),f=x("PropertyCollapsible"),v=x("TestResult");return i(),M(X,{to:"body"},[r("div",cr,[r("div",ur,[r("div",mr,[r("div",pr,[r("h5",hr,s(e.$t("config.vehicle."+(c.isNew?"titleAdd":"titleEdit"))),1),gr]),r("div",fr,[r("form",vr,[P(u,{id:"vehicleTemplate",label:e.$t("config.vehicle.template")},{default:$((()=>[E(r("select",{id:"vehicleTemplate","onUpdate:modelValue":t[0]||(t[0]=e=>d.templateName=e),onChange:t[1]||(t[1]=(...e)=>c.templateChanged&&c.templateChanged(...e)),disabled:!c.isNew,class:"form-select w-100"},[r("option",yr,s(e.$t("config.vehicle.offline")),1),wr,r("optgroup",{label:e.$t("config.vehicle.online")},[(i(!0),o(D,null,R(c.templateOptions.online,(e=>(i(),o("option",{key:e.name,value:e.template},s(e.name),9,xr)))),128))],8,kr),r("optgroup",{label:e.$t("config.vehicle.scooter")},[(i(!0),o(D,null,R(c.templateOptions.scooter,(e=>(i(),o("option",{key:e.name,value:e.template},s(e.name),9,$r)))),128))],8,Mr),r("optgroup",{label:e.$t("config.vehicle.generic")},[(i(!0),o(D,null,R(c.templateOptions.generic,(e=>(i(),o("option",{key:e.name,value:e.template},s(e.name),9,Cr)))),128))],8,Tr)],40,br),[[G,d.templateName]])])),_:1},8,["label"]),d.loadingTemplate?(i(),o("p",Vr,"Loading ...")):T("",!0),c.description?(i(),M(m,{key:1,markdown:c.description,class:"my-4"},null,8,["markdown"])):T("",!0),(i(!0),o(D,null,R(c.normalParams,(e=>(i(),M(p,J({key:e.Name,id:`vehicleParam${e.Name}`,ref_for:!0},e,{modelValue:d.values[e.Name],"onUpdate:modelValue":t=>d.values[e.Name]=t}),null,16,["id","modelValue","onUpdate:modelValue"])))),128)),P(f,null,K({more:$((()=>[Sr,P(u,{id:"vehicleParamMode",label:"Default mode",help:"Charging point mode when connecting this vehicle."},{default:$((()=>[P(h,{id:"vehicleParamMode",modelValue:d.values.mode,"onUpdate:modelValue":t[2]||(t[2]=e=>d.values.mode=e),type:"String",class:"w-100","valid-values":[{key:"off",name:e.$t("main.mode.off")},{key:"pv",name:e.$t("main.mode.pv")},{key:"minpv",name:e.$t("main.mode.minpv")},{key:"now",name:e.$t("main.mode.now")}]},null,8,["modelValue","valid-values"])])),_:1}),P(u,{id:"vehicleParamPhases",label:"Maximum phases",help:"How many phases can this vehicle charge with? Used to calculate required minimum solar surplus and plan duration."},{default:$((()=>[P(g,{id:"vehicleParamPhases",class:"w-100",modelValue:d.values.phases,"onUpdate:modelValue":t[3]||(t[3]=e=>d.values.phases=e),options:[{name:"1-phase",value:"1"},{name:"2-phases",value:"2"},{name:"3-phases",value:void 0}]},null,8,["modelValue"])])),_:1}),r("div",Pr,[P(u,{id:"vehicleParamMinCurrent",label:"Minimum current",class:"col-sm-6 mb-sm-0",help:d.values.minCurrent&&d.values.minCurrent<6?"Only go below 6 A if you know what you're doing.":null},{default:$((()=>[P(h,{id:"vehicleParamMinCurrent",modelValue:d.values.minCurrent,"onUpdate:modelValue":t[4]||(t[4]=e=>d.values.minCurrent=e),type:"Float",unit:"A",size:"w-25 w-min-200",class:"me-2"},null,8,["modelValue"])])),_:1},8,["help"]),P(u,{id:"vehicleParamMaxCurrent",label:"Maximum current",class:"col-sm-6 mb-sm-0",help:d.values.minCurrent&&d.values.maxCurrent&&d.values.maxCurrent<d.values.minCurrent?"Must be greater than minimum current.":null},{default:$((()=>[P(h,{id:"vehicleParamMaxCurrent",modelValue:d.values.maxCurrent,"onUpdate:modelValue":t[5]||(t[5]=e=>d.values.maxCurrent=e),type:"Float",unit:"A",size:"w-25 w-min-200",class:"me-2"},null,8,["modelValue"])])),_:1},8,["help"])]),P(u,{id:"vehicleParamPriority",label:"Priority",help:"Changes the charging point priority when connecting this vehicle."},{default:$((()=>[P(h,{id:"vehicleParamPriority",modelValue:d.values.priority,"onUpdate:modelValue":t[6]||(t[6]=e=>d.values.priority=e),type:"Number",size:"w-100",class:"me-2","valid-values":c.priorityOptions,required:""},null,8,["modelValue","valid-values"])])),_:1}),P(u,{id:"vehicleParamIdentifiers",label:"RFID identifiers",help:"List of RFID strings to identify the vehicle. One per line. See the current identifier on the configuration overview."},{default:$((()=>[P(h,{id:"vehicleParamIdentifiers",modelValue:d.values.identifiers,"onUpdate:modelValue":t[7]||(t[7]=e=>d.values.identifiers=e),type:"StringList",property:"identifiers",size:"w-100",class:"me-2"},null,8,["modelValue"])])),_:1})])),_:2},[c.advancedParams.length?{name:"advanced",fn:$((()=>[(i(!0),o(D,null,R(c.advancedParams,(e=>(i(),M(p,J({key:e.Name,id:`vehicleParam${e.Name}`,ref_for:!0},e,{modelValue:d.values[e.Name],"onUpdate:modelValue":t=>d.values[e.Name]=t}),null,16,["id","modelValue","onUpdate:modelValue"])))),128))])),key:"0"}:void 0]),1024),d.templateName?(i(),M(v,{key:2,success:e.testSuccess,failed:e.testFailed,unknown:e.testUnknown,running:e.testRunning,result:e.testResult,error:e.testError,onTest:c.testManually},null,8,["success","failed","unknown","running","result","error","onTest"])):T("",!0),d.templateName?(i(),o("div",qr,[c.isDeletable?(i(),o("button",{key:0,type:"button",class:"btn btn-link text-danger",onClick:t[8]||(t[8]=q(((...e)=>c.remove&&c.remove(...e)),["prevent"]))},s(e.$t("config.vehicle.delete")),1)):(i(),o("button",Ir,s(e.$t("config.vehicle.cancel")),1)),r("button",{type:"submit",class:"btn btn-primary",disabled:e.testRunning||d.saving,onClick:t[9]||(t[9]=q((e=>c.isNew?c.create():c.update()),["prevent"]))},[d.saving?(i(),o("span",Er)):T("",!0),l(" "+s(e.testUnknown?e.$t("config.vehicle.validateSave"):e.$t("config.vehicle.save")),1)],8,Or)])):T("",!0)],512)])])])],512)])}],["__scopeId","data-v-a893535e"]])},props:{offline:Boolean,notifications:Array},data:()=>({vehicles:[],meters:[],circuits:[],selectedVehicleId:void 0,selectedMeterId:void 0,selectedMeterType:void 0,site:{grid:"",pv:[],battery:[]},deviceValueTimeout:void 0,deviceValues:{},yamlConfigState:{messaging:!1,eebus:!1,circuits:!1,modbusproxy:!1,hems:!1}}),mixins:[L,ie],computed:{fatalClass:()=>O.state?.fatal?.class,siteTitle(){return this.site?.title},gridMeter(){const e=this.site?.grid;return this.getMetersByNames([e])[0]},pvMeters(){const e=this.site?.pv;return this.getMetersByNames(e)},batteryMeters(){const e=this.site?.battery;return this.getMetersByNames(e)},selectedMeterName(){return this.getMeterById(this.selectedMeterId)?.name},tariffTags(){const{currency:e,tariffGrid:t,tariffFeedIn:a,tariffCo2:n}=O.state,i={};return e&&(i.currency={value:e}),t&&(i.gridPrice={value:t,options:{currency:e}}),a&&(i.feedinPrice={value:-1*a,options:{currency:e}}),n&&(i.co2={value:n}),i},mqttTags(){const{broker:e,topic:t}=O.state?.mqtt||{};return e?{broker:{value:e},topic:{value:t}}:{configured:{value:!1}}},influxTags(){const{url:e,database:t,org:a}=O.state?.influx||{};if(!e)return{configured:{value:!1}};const n={url:{value:e}};return t&&(n.bucket={value:t}),a&&(n.org={value:a}),n}},watch:{offline(){this.offline||this.loadAll()}},mounted(){this.loadAll()},unmounted(){clearTimeout(this.deviceValueTimeout)},methods:{async loadAll(){await this.loadVehicles(),await this.loadMeters(),await this.loadSite(),await this.loadCircuits(),await this.loadDirty(),await this.updateValues(),await this.updateYamlConfigState()},async loadDirty(){const e=await S.get("/config/dirty");e.data?.result&&(oe.restartNeeded=!0)},async loadVehicles(){const e=await S.get("/config/devices/vehicle");this.vehicles=e.data?.result||[]},async loadMeters(){const e=await S.get("/config/devices/meter");this.meters=e.data?.result||[]},async loadCircuits(){const e=await S.get("/config/devices/circuit");this.circuits=e.data?.result||[]},async loadSite(){const e=await S.get("/config/site",{validateStatus:e=>e<500});200===e.status&&(this.site=e.data?.result)},getMetersByNames(e){return e&&this.meters?this.meters.filter((t=>e.includes(t.name))):[]},getMeterById(e){if(e&&this.meters)return this.meters.find((t=>t.id===e))},vehicleModal:()=>B.getOrCreateInstance(document.getElementById("vehicleModal")),meterModal:()=>B.getOrCreateInstance(document.getElementById("meterModal")),editMeter(e,t){this.selectedMeterId=e,this.selectedMeterType=t,this.$nextTick((()=>this.meterModal().show()))},addMeter(e){this.selectedMeterId=void 0,this.selectedMeterType=e,this.$nextTick((()=>this.meterModal().show()))},async meterChanged(){this.selectedMeterId=void 0,this.selectedMeterType=void 0,await this.loadMeters(),this.meterModal().hide(),await this.loadDirty(),await this.updateValues()},editVehicle(e){this.selectedVehicleId=e,this.$nextTick((()=>this.vehicleModal().show()))},addVehicle(){this.selectedVehicleId=void 0,this.$nextTick((()=>this.vehicleModal().show()))},vehicleChanged(){this.selectedVehicleId=void 0,this.vehicleModal().hide(),this.loadVehicles(),this.loadDirty()},siteChanged(){this.loadDirty()},yamlChanged(){this.loadDirty(),this.updateYamlConfigState()},addMeterToSite(e,t){"grid"===e?this.site.grid=t:(this.site[e]||(this.site[e]=[]),this.site[e].push(t)),this.saveSite(e)},removeMeterFromSite(e,t){"grid"===e?this.site.grid="":this.site[e]&&(this.site[e]=this.site[e].filter((e=>e!==t))),this.saveSite(e)},async saveSite(e){const t=e?{[e]:this.site[e]}:this.site;await S.put("/config/site",t),await this.loadSite(),await this.loadDirty(),await this.updateValues()},todo(){alert("not implemented yet")},async restart(){await re()},async updateDeviceValue(e,t){try{const a=await S.get(`/config/devices/${e}/${t}/status`);this.deviceValues[e]||(this.deviceValues[e]={}),this.deviceValues[e][t]=a.data.result}catch(a){return console.error("Error fetching device values for",e,t,a),null}},async updateValues(){if(clearTimeout(this.deviceValueTimeout),!this.offline){const e=[...this.meters.map((e=>this.updateDeviceValue("meter",e.name))),...this.vehicles.map((e=>this.updateDeviceValue("vehicle",e.name)))];await Promise.all(e)}this.deviceValueTimeout=setTimeout(this.updateValues,1e4)},deviceTags(e,t){return this.deviceValues[e]?.[t]||[]},openModal(e){const t=document.getElementById(e);t?B.getOrCreateInstance(t).show():console.error(`modal ${e} not found`)},updateYamlConfigState(){Object.keys(this.yamlConfigState).forEach((async e=>{const t=await S.get(`/config/${e}`);this.yamlConfigState[e]=!!t.data.result}))},yamlTags(e){return{configured:{value:this.yamlConfigState[e]}}},circuitTags(e){const t=O.state?.circuits[e.name]||{},a={};return t.maxPower?a.powerRange={value:[t.power||0,t.maxPower],warning:t.power>=t.maxPower}:a.power={value:t.power||0,muted:!0},t.maxCurrent&&(a.currentRange={value:[t.current||0,t.maxCurrent],warning:t.current>=t.maxCurrent}),a},deviceError(e,t){const a=O.state?.fatal||{};return a.class===e&&a.device===t}}},Nr=e=>(d("data-v-da87840f"),e=e(),c(),e),_r={class:"root safe-area-inset"},Lr={class:"container px-4"},Dr={class:"wrapper pb-5"},Rr={key:0,class:"alert alert-danger my-4 pb-0",role:"alert"},jr=[le('<p data-v-da87840f><strong data-v-da87840f>Experimental! ðŸ§ª</strong> Only use these features if you are in the mood for adventure and not afraid of debugging. Unexpected things and data loss may happen. </p><p data-v-da87840f> We are in the progress of replacing <code data-v-da87840f>evcc.yaml</code> with UI-based configuration. Any changes made here will be written to the database. After that, the corresponding <code data-v-da87840f>evcc.yaml</code>-values (e.g. network settings) will be ignored. </p><p class="mb-1" data-v-da87840f><strong data-v-da87840f>Missing features</strong></p><ul data-v-da87840f><li data-v-da87840f>aux meters</li><li data-v-da87840f>loadpoints and chargers</li><li data-v-da87840f>custom/plugin meters and vehicles</li><li data-v-da87840f>migration for vehicles, chargers, meters, loadpoints</li><li data-v-da87840f>remove mixed mode (evcc.yaml + db) for meters and vehicles</li></ul><p data-v-da87840f><strong data-v-da87840f>Migration and repair.</strong> Run <code data-v-da87840f>evcc migrate</code> to copy configuration from <code data-v-da87840f>evcc.yaml</code> to the database. Existing database configurations will be overwritten. Session and statistics data will not be touched. Run <code data-v-da87840f>evcc migrate --reset</code> to remove all database configurations. </p>',5)],Br={class:"my-4 mt-5"},Ar={key:1},zr={class:"my-4 mt-5"},Fr={class:"p-0 config-list"},Hr=Nr((()=>r("shopicon-regular-powersupply",null,null,-1))),Yr=Nr((()=>r("shopicon-regular-receivepayment",null,null,-1))),Gr={class:"my-4 mt-5"},Wr={class:"p-0 config-list"},Jr=Nr((()=>r("shopicon-regular-sun",null,null,-1))),Kr=Nr((()=>r("shopicon-regular-batterythreequarters",null,null,-1))),Xr={class:"my-4 wip"},Qr={class:"p-0 config-list wip"},Zr=Nr((()=>r("shopicon-regular-cablecharge",null,null,-1))),el={class:"my-4"},tl={class:"p-0 config-list"},al={class:"my-4 mt-5"},nl={class:"p-0 config-list"},il={key:0},ol={class:"my-2 fw-bold"},rl=Nr((()=>r("hr",{class:"my-5"},null,-1))),ll={class:"my-4 mt-5"},sl={class:"round-box p-4 d-flex gap-4 mb-5"};e("default",n(Ur,[["render",function(e,t,a,n,d,c){const u=x("TopHeader"),m=x("GeneralConfig"),p=x("DeviceTags"),h=x("DeviceCard"),g=x("AddDeviceButton"),f=x("VehicleIcon"),v=x("MqttIcon"),b=x("NotificationIcon"),y=x("InfluxIcon"),w=x("EebusIcon"),k=x("CircuitsIcon"),C=x("ModbusProxyIcon"),V=x("HemsIcon"),S=x("router-link"),q=x("VehicleModal"),I=x("MeterModal"),O=x("InfluxModal"),E=x("MqttModal"),U=x("NetworkModal"),N=x("ControlModal"),_=x("SponsorModal"),L=x("HemsModal"),j=x("MessagingModal"),B=x("TariffsModal"),A=x("ModbusProxyModal"),z=x("CircuitsModal"),F=x("EebusModal");return i(),o("div",_r,[r("div",Lr,[P(u,{title:e.$t("config.main.title")},null,8,["title"]),r("div",Dr,[e.$hiddenFeatures()?(i(),o("div",Rr,jr)):T("",!0),r("h2",Br,s(e.$t("config.section.general")),1),P(m,{onSiteChanged:c.siteChanged},null,8,["onSiteChanged"]),e.$hiddenFeatures()?(i(),o("div",Ar,[r("h2",zr,s(e.$t("config.section.grid"))+" ðŸ§ª",1),r("ul",Fr,[P(h,{name:e.$t("config.grid.title"),editable:!c.gridMeter||!!c.gridMeter.id,error:c.deviceError("meter",c.gridMeter?.name),"data-testid":"grid",onEdit:t[0]||(t[0]=e=>c.gridMeter?.id?c.editMeter(c.gridMeter.id,"grid"):c.addMeter("grid"))},{icon:$((()=>[Hr])),tags:$((()=>[P(p,{tags:c.gridMeter?c.deviceTags("meter",c.gridMeter.name):{configured:{value:!1}}},null,8,["tags"])])),_:1},8,["name","editable","error"]),P(h,{name:e.$t("config.tariffs.title"),editable:"",error:"tariff"===c.fatalClass,"data-testid":"tariffs",onEdit:t[1]||(t[1]=e=>c.openModal("tariffsModal"))},{icon:$((()=>[Yr])),tags:$((()=>[P(p,{tags:c.tariffTags},null,8,["tags"])])),_:1},8,["name","error"])]),r("h2",Gr,s(e.$t("config.section.meter"))+" ðŸ§ª",1),r("ul",Wr,[(i(!0),o(D,null,R(c.pvMeters,(e=>(i(),M(h,{key:e.name,name:e.config?.template||"Solar system",editable:!!e.id,error:c.deviceError("meter",e.name),"data-testid":"pv",onEdit:t=>c.editMeter(e.id,"pv")},{icon:$((()=>[Jr])),tags:$((()=>[P(p,{tags:c.deviceTags("meter",e.name)},null,8,["tags"])])),_:2},1032,["name","editable","error","onEdit"])))),128)),(i(!0),o(D,null,R(c.batteryMeters,(e=>(i(),M(h,{key:e.name,name:e.config?.template||"Battery storage",editable:!!e.id,error:c.deviceError("meter",e.name),"data-testid":"battery",onEdit:t=>c.editMeter(e.id,"battery")},{icon:$((()=>[Kr])),tags:$((()=>[P(p,{tags:c.deviceTags("meter",e.name)},null,8,["tags"])])),_:2},1032,["name","editable","error","onEdit"])))),128)),P(g,{title:e.$t("config.main.addPvBattery"),onAdd:c.addMeter},null,8,["title","onAdd"])]),r("h2",Xr,s(e.$t("config.section.loadpoints"))+" ðŸ§ª",1),r("ul",Qr,[P(h,{name:"Fake Carport",editable:"",error:c.deviceError("charger","fake-charger"),"data-testid":"chargepoint-1",onEdit:c.todo},{icon:$((()=>[Zr])),tags:$((()=>[P(p,{tags:{power:0}})])),_:1},8,["error","onEdit"]),P(g,{"data-testid":"add-loadpoint",title:e.$t("config.main.addLoadpoint"),onClick:c.todo},null,8,["title","onClick"])]),r("h2",el,s(e.$t("config.section.vehicles"))+" ðŸ§ª",1),r("div",null,[r("ul",tl,[(i(!0),o(D,null,R(d.vehicles,(e=>(i(),M(h,{key:e.name,name:e.config?.title||e.name,editable:e.id>=0,error:c.deviceError("vehicle",e.name),"data-testid":"vehicle",onEdit:t=>c.editVehicle(e.id)},{icon:$((()=>[P(f,{name:e.config?.icon},null,8,["name"])])),tags:$((()=>[P(p,{tags:c.deviceTags("vehicle",e.name)},null,8,["tags"])])),_:2},1032,["name","editable","error","onEdit"])))),128)),P(g,{"data-testid":"add-vehicle",title:e.$t("config.main.addVehicle"),onClick:c.addVehicle},null,8,["title","onClick"])]),r("h2",al,s(e.$t("config.section.integrations"))+" ðŸ§ª",1),r("ul",nl,[P(h,{name:e.$t("config.mqtt.title"),editable:"",error:"mqtt"===c.fatalClass,"data-testid":"mqtt",onEdit:t[2]||(t[2]=e=>c.openModal("mqttModal"))},{icon:$((()=>[P(v)])),tags:$((()=>[P(p,{tags:c.mqttTags},null,8,["tags"])])),_:1},8,["name","error"]),P(h,{name:e.$t("config.messaging.title"),editable:"",error:"messenger"===c.fatalClass,"data-testid":"messaging",onEdit:t[3]||(t[3]=e=>c.openModal("messagingModal"))},{icon:$((()=>[P(b)])),tags:$((()=>[P(p,{tags:c.yamlTags("messaging")},null,8,["tags"])])),_:1},8,["name","error"]),P(h,{name:e.$t("config.influx.title"),editable:"",error:"influx"===c.fatalClass,"data-testid":"influx",onEdit:t[4]||(t[4]=e=>c.openModal("influxModal"))},{icon:$((()=>[P(y)])),tags:$((()=>[P(p,{tags:c.influxTags},null,8,["tags"])])),_:1},8,["name","error"]),P(h,{name:`${e.$t("config.eebus.title")} ðŸ§ª`,editable:"",error:"eebus"===c.fatalClass,"data-testid":"eebus",onEdit:t[5]||(t[5]=e=>c.openModal("eebusModal"))},{icon:$((()=>[P(w)])),tags:$((()=>[P(p,{tags:c.yamlTags("eebus")},null,8,["tags"])])),_:1},8,["name","error"]),P(h,{name:`${e.$t("config.circuits.title")} ðŸ§ª`,editable:"",error:"circuit"===c.fatalClass,"data-testid":"circuits",onEdit:t[6]||(t[6]=e=>c.openModal("circuitsModal"))},{icon:$((()=>[P(k)])),tags:$((()=>[0==d.circuits.length?(i(),M(p,{key:0,tags:c.yamlTags("circuits")},null,8,["tags"])):(i(!0),o(D,{key:1},R(d.circuits,((e,t)=>(i(),o(D,{key:e.name},[t>0?(i(),o("hr",il)):T("",!0),r("p",ol,[l(s(e.config?.title)+" ",1),r("code",null,"("+s(e.name)+")",1)]),P(p,{tags:c.circuitTags(e)},null,8,["tags"])],64)))),128))])),_:1},8,["name","error"]),P(h,{name:e.$t("config.modbusproxy.title"),editable:"",error:"modbusproxy"===c.fatalClass,"data-testid":"modbusproxy",onEdit:t[7]||(t[7]=e=>c.openModal("modbusProxyModal"))},{icon:$((()=>[P(C)])),tags:$((()=>[P(p,{tags:c.yamlTags("modbusproxy")},null,8,["tags"])])),_:1},8,["name","error"]),P(h,{name:e.$t("config.hems.title"),editable:"",error:"hems"===c.fatalClass,"data-testid":"hems",onEdit:t[8]||(t[8]=e=>c.openModal("hemsModal"))},{icon:$((()=>[P(V)])),tags:$((()=>[P(p,{tags:c.yamlTags("hems")},null,8,["tags"])])),_:1},8,["name","error"])])])])):T("",!0),rl,r("h2",ll,s(e.$t("config.section.system")),1),r("div",sl,[P(S,{to:"/log",class:"btn btn-outline-secondary"},{default:$((()=>[l(s(e.$t("config.system.logs")),1)])),_:1}),r("button",{class:"btn btn-outline-danger",onClick:t[9]||(t[9]=(...e)=>c.restart&&c.restart(...e))},s(e.$t("config.system.restart")),1)]),P(q,{id:d.selectedVehicleId,onVehicleChanged:c.vehicleChanged},null,8,["id","onVehicleChanged"]),P(I,{id:d.selectedMeterId,name:c.selectedMeterName,type:d.selectedMeterType,onAdded:c.addMeterToSite,onUpdated:c.meterChanged,onRemoved:c.removeMeterFromSite},null,8,["id","name","type","onAdded","onUpdated","onRemoved"]),P(O,{onChanged:c.loadDirty},null,8,["onChanged"]),P(E,{onChanged:c.loadDirty},null,8,["onChanged"]),P(U,{onChanged:c.loadDirty},null,8,["onChanged"]),P(N,{onChanged:c.loadDirty},null,8,["onChanged"]),P(_,{onChanged:c.loadDirty},null,8,["onChanged"]),P(L,{onChanged:c.yamlChanged},null,8,["onChanged"]),P(j,{onChanged:c.yamlChanged},null,8,["onChanged"]),P(B,{onChanged:c.yamlChanged},null,8,["onChanged"]),P(A,{onChanged:c.yamlChanged},null,8,["onChanged"]),P(z,{onChanged:c.yamlChanged},null,8,["onChanged"]),P(F,{onChanged:c.yamlChanged},null,8,["onChanged"])])])])}],["__scopeId","data-v-da87840f"]]))}}}));
